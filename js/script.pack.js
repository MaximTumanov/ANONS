eval(function(b,c,a,d,f,e){f=function(b){return(b<c?"":f(parseInt(b/c)))+(35<(b%=c)?String.fromCharCode(b+29):b.toString(36))};if(!"".replace(/^/,String)){for(;a--;)e[f(a)]=d[a]||f(a);d=[function(b){return e[b]}];f=function(){return"\\w+"};a=1}for(;a--;)d[a]&&(b=b.replace(RegExp("\\b"+f(a)+"\\b","g"),d[a]));return b}('(N($){$.5c.3V=N(o){$.5c.3V.6d={3W:X,3p:X,6k:"8u",34:"%Y/%m/%d",44:"%Y/%m/%d",6A:1f,4Z:X,4T:X,4N:X,64:"80",2Z:[4q,7x],1A:1f,2T:X,48:X,2x:X,2Y:X,41:X,1c:X,2c:17,54:"24",6j:1f,2H:2,2F:X,69:17,4G:17,1v:X,5Z:17};G q=$.7O({},$.5c.3V.6d,o);Q J.7w(N(){G n=J;G k=X;G h=X;G l=X;F(q.3W){4a{k=4e("3B(J)"+q.3W+".3q(0);")}4u(3Z){q.3W=X}}F(q.3p){4a{h=4e("3B(J)"+q.3p+".3q(0);")}4u(3Z){q.3p=X}}F(q.2T){4a{l=4e("3B(J)"+q.2T+".3q(0);")}4u(3Z){q.2T=X}}F(!(l||q.1v||n||k||h)){2C("3X");Q}N 2x(b){G p=b.3X;G a=(b.2e||p.6j);F(a&&n){n.58=b.1c.2a(p.34);F(1m n.6p=="N")n.6p()}F(a&&k)k.1g=b.1c.2a(p.44);F(a&&1m p.41=="N")p.41(b);F(a&&p.2T){F(1m p.48=="N")p.48(b)}F(a&&p.6A&&b.2e)b.2L()};F(l!=X){G m=1d E(q.4N,q.1c,q.2x||2x);m.3j=q.4G;m.2c=q.2c;m.3F=(q.54=="24");m.3X=q;m.1A=q.1A;m.4R(q.2Z[0],q.2Z[1]);m.4L(q.4Z);m.3f=q.4T;F(q.34){m.4I(q.34)}F(n&&1m n.58=="65"){2C("8c")}m.4B(l);m.4y();Q}G j=h||k||n;j["2Q"+q.6k]=N(){2C("7V");G g=n||k;G f=n?q.34:q.44;G b=17;G c=1i.1x;F(g)q.1c=16.3T(g.58||g.1g,f);F(!(c&&q.69)){1i.1x=c=1d E(q.4N,q.1c,q.2x||2x,q.2Y||N(a){a.4m()});c.2c=q.2c;c.3F=(q.54=="24");c.1A=q.1A;b=1f}O{F(q.1c)c.1p(q.1c);c.4m()}F(q.1v){c.1v={};1h(G i=q.1v.1o;--i>=0;){G d=q.1v[i];G e=d.2a("%Y%m%d");c.1v[e]=d}}c.3j=q.4G;c.3v=q.2H;c.4R(q.2Z[0],q.2Z[1]);c.3X=q;c.4L(q.4Z);c.3f=q.4T;c.4I(f);F(b)c.4B();c.5D();F(!q.2F)c.5A(h||k||n,q.64);O c.3t(q.2F[0],q.2F[1]);Q 17}});N 2C(a){F(q.5Z){1i.7c();F(1i.4b&&1i.4b.2C)1i.4b.2C("3V: "+a)}}}})(3B);E=N(b,c,a,e){J.2w=X;J.1W=X;J.2I=X;J.3r=X;J.3f=X;J.1N=X;J.4s=a||X;J.2Y=e||X;J.2W=17;J.2D=17;J.2l=6V;J.2k=6P;J.3s=E.1n["6L"];J.4H=E.1n["6I"];J.1R=1f;J.1A=1f;J.2b=1m b=="6y"?b:E.8O;J.3j=17;J.5b=c;J.2d=X;J.2c=17;J.3F=1f;J.3v=2;J.6u=1f;J.1v=X;J.2E=X;J.1u=X;J.3R=X;J.57=X;J.2N=X;J.3O=X;J.1U=X;J.3N=X;J.1S=X;J.3M=X;J.2e=17;F(1m E.3L=="1B"){F(1m E.51=="1B")E.51=3;G d=1d 2K();1h(G i=8;i>0;){d[--i]=E.4X[i].22(0,E.51)}E.3L=d;F(1m E.4V=="1B")E.4V=3;d=1d 2K();1h(G i=12;i>0;){d[--i]=E.2r[i].22(0,E.4V)}E.3G=d}};E.1D=X;E.1z=(/6e/i.1F(3h.3g)&&!/6a/i.1F(3h.3g));E.4J=(E.1z&&/6e 5\\.0/i.1F(3h.3g));E.68=/6a/i.1F(3h.3g);E.3D=/8g|8e|8b/i.1F(3h.3g);E.2p=N(a){G d=0,4A=0;G b=/^1K$/i.1F(a.61);F(b&&a.3a)d=a.3a;F(b&&a.35)4A=a.35;G r={x:a.33-d,y:a.4v-4A};F(a.5V){G c=J.2p(a.5V);r.x+=c.x;r.y+=c.y}Q r};E.4P=N(b,d){G a=d.7S;F(!a){G c=d.5S;F(c=="3C"){a=d.7Q}O F(c=="5R"){a=d.7L}}3k(a){F(a==b){Q 1f}a=a.1y}Q 17};E.1j=N(a,b){F(!(a&&a.19)){Q}G d=a.19.5N(" ");G c=1d 2K();1h(G i=d.1o;i>0;){F(d[--i]!=b){c[c.1o]=d[i]}}a.19=c.7E(" ")};E.1G=N(b,a){E.1j(b,a);b.19+=" "+a};E.2q=N(a){G f=E.1z?1i.1M.5L:a.7v;3k(f.5K!=1||/^1K$/i.1F(f.61))f=f.1y;Q f};E.2U=N(a){G f=E.1z?1i.1M.5L:a.7r;3k(f.5K!=1)f=f.1y;Q f};E.1P=N(a){a||(a=1i.1M);F(E.1z){a.7p=1f;a.7o=17}O{a.7m();a.7l()}Q 17};E.1C=N(c,a,b){F(c.5F){c.5F("2Q"+a,b)}O F(c.5E){c.5E(a,b,1f)}O{c["2Q"+a]=b}};E.1V=N(c,a,b){F(c.5C){c.5C("2Q"+a,b)}O F(c.5B){c.5B(a,b,1f)}O{c["2Q"+a]=X}};E.1e=N(a,b){G c=X;F(1b.5x){c=1b.5x("5v://7b.7a.77/76/75",a)}O{c=1b.1e(a)}F(1m b!="1B"){b.2g(c)}Q c};E.2u=N(a){2A(E){1C(a,"3C",5t);1C(a,"3w",5s);1C(a,"5R",5q);F(1z){1C(a,"74",5n);a.73("5m",1f)}}};E.4j=N(a){F(1m a.2B!="1B"){Q a}O F(1m a.1y.2B!="1B"){Q a.1y}Q X};E.4p=N(a){F(1m a.2J!="1B"){Q a}O F(1m a.1y.2J!="1B"){Q a.1y}Q X};E.5T=N(){G b=E.1D;F(!b){Q 17}G b=b;G a=b.2w;G c=b.2N;F(b.1U){E.1j(b.1U,"1t")}F(b.3N){E.1j(b.3N,"26")}G d=b.2N.2X("1K")[b.1c.1q()];E.1G(d,"26");b.3N=d;G s=c.1l;s.1H="36";F(a.1k<0)s.2j=a.33+"1Q";O{G e=c.1L;F(1m e=="1B")e=50;s.2j=(a.33+a.1L-e)+"1Q"}s.3c=(a.4v+a.1Y)+"1Q"};E.4F=N(e){G g=E.1D;F(!g){Q 17}G g=g;G f=g.2w;G d=g.3O;F(g.1S){E.1j(g.1S,"1t")}F(g.3M){E.1j(g.3M,"26")}g.3M=X;G Y=g.1c.1s()+(e?1:-1);G a=d.3e;G b=17;1h(G i=12;i>0;--i){F(Y>=g.2l&&Y<=g.2k){a.1g=Y;a.2J=Y;a.1l.1H="36";b=1f}O{a.1l.1H="2i"}a=a.2R;Y+=e?g.3v:-g.3v}F(b){G s=d.1l;s.1H="36";F(f.1k<0)s.2j=f.33+"1Q";O{G c=d.1L;F(1m c=="1B")c=50;s.2j=(f.33+f.1L-c)+"1Q"}s.3c=(f.4v+f.1Y)+"1Q"}};E.3E=N(c){G a=E.1D;F(!a){Q 17}F(a.1N){4M(a.1N)}G d=a.2w;F(!d){Q 17}G b=E.2U(c);c||(c=1i.1M);E.1j(d,"26");F(b==d||b.1y==d){E.1O(d,c)}G e=E.4j(b);G g=X;F(e){g=1d 16(a.1c);F(e.2B!=g.1q()){g.1T(e.2B);a.1p(g);a.2e=17;a.3o()}}O{G f=E.4p(b);F(f){g=1d 16(a.1c);F(f.2J!=g.1s()){g.1J(f.2J);a.1p(g);a.2e=17;a.3o()}}}2A(E){1V(1b,"3U",3E);1V(1b,"3C",3m);1V(1b,"3b",3m);a.6t();1D=X;Q 1P(c)}};E.3m=N(b){G n=E.1D;F(!n){Q}G l=n.2w;G f=E.2U(b);F(f==l||f.1y==l){E.1G(l,"1t 26");E.1G(l.1y,"3n")}O{F(1m l.1k=="1B"||(l.1k!=50&&(l.1k==0||2m.6s(l.1k)>2)))E.1j(l,"26");E.1j(l,"1t");E.1j(l.1y,"3n")}b||(b=1i.1M);F(l.1k==50&&f!=l){G c=E.2p(l);G w=l.1L;G x=b.3S;G a;G d=1f;F(x>c.x+w){a=x-c.x-w;d=17}O a=c.x-x;F(a<0)a=0;G j=l.2P;G g=l.6r;G h=2m.3Q(a/10)%j.1o;1h(G i=j.1o;--i>=0;)F(j[i]==g)18;3k(h--\>0)F(d){F(--i<0)i=j.1o-1}O F(++i>=j.1o)i=0;G m=j[i];l.1g=m;n.3P()}G k=E.4j(f);F(k){F(k.2B!=n.1c.1q()){F(n.1U){E.1j(n.1U,"1t")}E.1G(k,"1t");n.1U=k}O F(n.1U){E.1j(n.1U,"1t")}}O{F(n.1U){E.1j(n.1U,"1t")}G e=E.4p(f);F(e){F(e.2J!=n.1c.1s()){F(n.1S){E.1j(n.1S,"1t")}E.1G(e,"1t");n.1S=e}O F(n.1S){E.1j(n.1S,"1t")}}O F(n.1S){E.1j(n.1S,"1t")}}Q E.1P(b)};E.6q=N(a){F(E.2U(a)==E.2q(a)){Q E.1P(a)}};E.56=N(d){G c=E.1D;F(!(c&&c.2W)){Q 17}G a;G b;F(E.1z){b=1i.1M.55+1b.20.35;a=1i.1M.3S+1b.20.3a}O{a=d.8D;b=d.8C}c.2M();G e=c.1u.1l;e.2j=(a-c.6o)+"1Q";e.3c=(b-c.6n)+"1Q";Q E.1P(d)};E.53=N(a){G b=E.1D;F(!b){Q 17}b.2W=17;2A(E){1V(1b,"3b",56);1V(1b,"3U",53);3E(a)}b.2M()};E.5s=N(a){G b=E.2q(a);F(b.1I){Q 17}G c=b.1x;c.2w=b;E.1D=c;F(b.1k!=3K)2A(E){F(b.1k==50){b.6r=b.1g;1C(1b,"3b",3m)}O 1C(1b,E.4J?"3b":"3C",3m);1G(b,"1t 26");1C(1b,"3U",3E)}O F(c.1R){c.6m(a)}F(b.1k==-1||b.1k==1){F(c.1N)4M(c.1N);c.1N=52("E.5T()",6l)}O F(b.1k==-2||b.1k==2){F(c.1N)4M(c.1N);c.1N=52((b.1k>0)?"E.4F(1f)":"E.4F(17)",6l)}O{c.1N=X}Q E.1P(a)};E.5n=N(a){E.1O(E.2q(a),a||1i.1M);F(E.1z){1b.8B.8A()}};E.5t=N(a){G b=E.2q(a);F(E.4P(b,a)||E.1D||b.1I){Q 17}F(b.1r){F(b.1r.22(0,1)=="6i"){b.1r=b.3l.2a(b.1x.4H)+b.1r.22(1)}b.1x.4Y.1g=b.1r}F(b.1k!=3K){E.1G(b,"1t");F(b.3l){E.1G(b.1y,"3n")}}Q E.1P(a)};E.5q=N(a){2A(E){G b=2q(a);F(4P(b,a)||1D||b.1I)Q 17;1j(b,"1t");F(b.3l)1j(b.1y,"3n");F(b.1x)b.1x.4Y.1g=1n["6h"];Q 1P(a)}};E.1O=N(n,d){G p=n.1x;G j=17;G g=17;G l=X;F(1m n.1k=="1B"){F(p.1W){E.1j(p.1W,"2O");E.1G(n,"2O");j=(p.1W==n);F(!j){p.1W=n}}p.1c.4W(n.3l);l=p.1c;G q=!(p.2e=!n.3I);F(!q&&!p.1W)p.6g(1d 16(l));O g=!n.1I;F(q)p.2G(p.2b,l)}O{F(n.1k==6f){E.1j(n,"1t");p.2L();Q}l=1d 16(p.1c);F(n.1k==0)l.4W(1d 16());p.2e=17;G e=l.1s();G k=l.1q();N 1T(m){G b=l.1w();G a=l.4U(m);F(b>a){l.1p(a)}l.1T(m)};2f(n.1k){14 4S:E.1j(n,"1t");G c=E.1n["8z"];F(1m c!="1B"){c+=p.2c?E.1n["8y"]:""}O{c="8x 4Q 8w 8v 8t 8s 8r 8q 6c J 6b.\\n"+"8p 4K 8o J 6b 4Q 4K 8n 8m 8l 8k\\n"+"67 8j 8i 66 \\"8f\\" 8d 4E 4D 1x-8a.88\\n"+"4Q 87 63 86 4E <85@84.62> 4E 3q 63 6c 67 83  ;-)\\n\\n"+"82 4K!\\n"+"5v://81.62/7Z/1x.7Y\\n"}7X(c);Q;14-2:F(e>p.2l){l.1J(e-1)}18;14-1:F(k>0){1T(k-1)}O F(e--\>p.2l){l.1J(e);1T(11)}18;14 1:F(k<11){1T(k+1)}O F(e<p.2k){l.1J(e+1);1T(0)}18;14 2:F(e<p.2k){l.1J(e+1)}18;14 25:p.5Y(n.5X);Q;14 50:G h=n.2P;G f=n.1g;1h(G i=h.1o;--i>=0;)F(h[i]==f)18;F(d&&d.7W){F(--i<0)i=h.1o-1}O F(++i>=h.1o)i=0;G o=h[i];n.1g=o;p.3P();Q;14 0:F((1m p.2I=="N")&&p.2I(l,l.1s(),l.1q(),l.1w())){Q 17}18}F(!l.4w(p.1c)){p.1p(l);g=1f}O F(n.1k==0)g=j=1f}F(g){d&&p.3o()}F(j){E.1j(n,"1t");d&&p.2L()}};E.1a.4B=N(u){G z=X;F(!u){z=1b.2X("20")[0];J.1R=1f}O{z=u;J.1R=17}J.1c=J.5b?1d 16(J.5b):1d 16();G q=E.1e("2E");J.2E=q;q.7U=0;q.7T=0;q.1x=J;E.1C(q,"3w",E.6q);G v=E.1e("1K");J.1u=v;v.19="1x";F(J.1R){v.1l.2F="5U";v.1l.1H="2i"}v.2g(q);G r=E.1e("7R",q);G C=X;G A=X;G w=J;G B=N(a,b,c){C=E.1e("1Z",A);C.3J=b;C.19="3p";F(c!=0&&2m.6s(c)<=2)C.19+=" 7P";E.2u(C);C.1x=w;C.1k=c;C.1g="<1K 5m=\'2Q\'>"+a+"</1K>";Q C};A=E.1e("2n",r);G p=6;(J.1R)&&--p;(J.1A)&&++p;B("?",1,4S).1r=E.1n["7M"];J.2o=B("",p,3K);J.2o.19="2o";F(J.1R){J.2o.1r=E.1n["5Q"];J.2o.1l.5P="5O";B("&#7K;",1,6f).1r=E.1n["7J"]}A=E.1e("2n",r);A.19="7I";J.4r=B("&#7H;",1,-2);J.4r.1r=E.1n["7G"];J.4o=B("&#7F;",1,-1);J.4o.1r=E.1n["7D"];J.4n=B(E.1n["7C"],J.1A?4:3,0);J.4n.1r=E.1n["7B"];J.4l=B("&#7A;",1,1);J.4l.1r=E.1n["7z"];J.4k=B("&#7y;",1,2);J.4k.1r=E.1n["7u"];A=E.1e("2n",r);A.19="7t";F(J.1A){C=E.1e("1Z",A);C.19="5J 5I";C.1g=E.1n["7s"]}1h(G i=7;i>0;--i){C=E.1e("1Z",A);F(!i){C.1k=25;C.1x=J;E.2u(C)}}J.57=(J.1A)?A.3e.2R:A.3e;J.4g();G D=E.1e("3R",q);J.3R=D;1h(i=6;i>0;--i){A=E.1e("2n",D);F(J.1A){C=E.1e("1Z",A)}1h(G j=7;j>0;--j){C=E.1e("1Z",A);C.1x=J;E.2u(C)}}F(J.2c){A=E.1e("2n",D);A.19="3y";C=E.1e("1Z",A);C.19="3y";C.3J=2;C.1g=E.1n["7q"]||"&4f;";C=E.1e("1Z",A);C.19="3y";C.3J=J.1A?4:3;(N(){N 3x(d,b,c,a){G e=E.1e("5G",C);e.19=d;e.1g=b;e.1x=w;e.1r=E.1n["7n"];e.1k=50;e.2P=[];F(1m c!="6y")e.2P=c;O{1h(G i=c;i<=a;++i){G f;F(i<10&&a>=10)f=\'0\'+i;O f=\'\'+i;e.2P[e.2P.1o]=f}}E.2u(e);Q e};G j=w.1c.2t();G o=w.1c.2s();G g=!w.3F;G n=(j>12);F(g&&n)j-=12;G H=3x("7k",j,g?1:0,g?12:23);G l=E.1e("5G",C);l.1g=":";l.19="7j";G M=3x("7i",o,0,59);G k=X;C=E.1e("1Z",A);C.19="3y";C.3J=2;F(g)k=3x("7h",n?"2z":"2v",["2v","2z"]);O C.1g="&4f;";w.4d=N(){G a,j=J.1c.2t(),o=J.1c.2s();F(g){a=(j>=12);F(a)j-=12;F(j==0)j=12;k.1g=a?"2z":"2v"}H.1g=(j<10)?("0"+j):j;M.1g=(o<10)?("0"+o):o};w.3P=N(){G a=J.1c;G h=1E(H.1g,10);F(g){F(/2z/i.1F(k.1g)&&h<12)h+=12;O F(/2v/i.1F(k.1g)&&h==12)h=0}G d=a.1w();G m=a.1q();G y=a.1s();a.7g(h);a.7f(1E(M.1g,10));a.1J(y);a.1T(m);a.1p(d);J.2e=17;J.3o()}})()}O{J.4d=J.3P=N(){}}G x=E.1e("7e",q);A=E.1e("2n",x);A.19="7d";C=B(E.1n["6h"],J.1A?8:7,3K);C.19="1r";F(J.1R){C.1r=E.1n["5Q"];C.1l.5P="5O"}J.4Y=C;v=E.1e("1K",J.1u);J.2N=v;v.19="5y";1h(i=0;i<E.2r.1o;++i){G s=E.1e("1K");s.19=E.1z?"3A-5w":"3A";s.2B=i;s.1g=E.3G[i];v.2g(s)}v=E.1e("1K",J.1u);J.3O=v;v.19="5y";1h(i=12;i>0;--i){G t=E.1e("1K");t.19=E.1z?"3A-5w":"3A";v.2g(t)}J.2G(J.2b,J.1c);z.2g(J.1u)};E.2S=N(c){G b=1i.2y;F(!b||b.1v)Q 17;(E.1z)&&(c=1i.1M);G e=(E.1z||c.5S=="4c"),K=c.79;F(c.78){2f(K){14 37:e&&E.1O(b.4o);18;14 38:e&&E.1O(b.4r);18;14 39:e&&E.1O(b.4l);18;14 40:e&&E.1O(b.4k);18;5z:Q 17}}O 2f(K){14 32:E.1O(b.4n);18;14 27:e&&b.2L();18;14 37:14 38:14 39:14 40:F(e){G d,x,y,1X,49,2H;d=K==37||K==38;2H=(K==37||K==39)?1:7;N 3u(){49=b.1W;G p=49.5u;x=p&15;y=p>>4;1X=b.2d[y][x]};3u();N 47(){G a=1d 16(b.1c);a.1p(a.1w()-2H);b.1p(a)};N 4h(){G a=1d 16(b.1c);a.1p(a.1w()+2H);b.1p(a)};3k(1){2f(K){14 37:F(--x>=0)1X=b.2d[y][x];O{x=6;K=38;2V}18;14 38:F(--y>=0)1X=b.2d[y][x];O{47();3u()}18;14 39:F(++x<7)1X=b.2d[y][x];O{x=0;K=40;2V}18;14 40:F(++y<b.2d.1o)1X=b.2d[y][x];O{4h();3u()}18}18}F(1X){F(!1X.1I)E.1O(1X);O F(d)47();O 4h()}}18;14 13:F(e)E.1O(b.1W,c);18;5z:Q 17}Q E.1P(c)};E.1a.2G=N(m,d){G f=1d 16(),5r=f.1s(),5H=f.1q(),5p=f.1w();J.2E.1l.2h="2D";G q=d.1s();F(q<J.2l){q=J.2l;d.1J(q)}O F(q>J.2k){q=J.2k;d.1J(q)}J.2b=m;J.1c=1d 16(d);G c=d.1q();G a=d.1w();G b=d.4U();d.1p(1);G g=(d.3z()-J.2b)%7;F(g<0)g+=7;d.1p(-g);d.1p(d.1w()+1);G s=J.3R.3e;G o=E.3G[c];G k=J.2d=1d 2K();G l=E.1n["5o"];G t=J.1v?(J.46={}):X;1h(G i=0;i<6;++i,s=s.2R){G u=s.3e;F(J.1A){u.19="4i 5I";u.1g=d.45();u=u.2R}s.19="72";G e=17,21,5M=k[i]=[];1h(G j=0;j<7;++j,u=u.2R,d.1p(21+1)){21=d.1w();G r=d.3z();u.19="4i";u.5u=i<<4|j;5M[j]=u;G n=(d.1q()==c);F(!n){F(J.3j){u.19+=" 71";u.3I=1f}O{u.19="70";u.1g="&4f;";u.1I=1f;2V}}O{u.3I=17;e=1f}u.1I=17;u.1g=J.3f?J.3f(d,21):21;F(t)t[d.2a("%Y%m%d")]=u;F(J.2I){G h=J.2I(d,q,c,21);F(J.3r){G p=J.3r(d,q,c,21);F(p)u.2o=p}F(h===1f){u.19+=" 1I";u.1I=1f}O{F(/1I/i.1F(h))u.1I=1f;u.19+=" "+h}}F(!u.1I){u.3l=1d 16(d);u.1r="6i";F(!J.1v&&n&&21==a&&J.6u){u.19+=" 2O";J.1W=u}F(d.1s()==5r&&d.1q()==5H&&21==5p){u.19+=" 6Z";u.1r+=E.1n["6Y"]}F(l.5l(r.6F())!=-1)u.19+=u.3I?" 6X":" 5k"}}F(!(e||J.3j))s.19="6W"}J.2o.1g=E.2r[c]+", "+q;J.4d();J.2E.1l.2h="7N";J.5j()};E.1a.5j=N(){F(J.1v){1h(G i 66 J.1v){G a=J.46[i];G d=J.1v[i];F(!d)2V;F(a)a.19+=" 2O"}}};E.1a.6g=N(b){F(J.1v){G a=b.2a("%Y%m%d");G c=J.46[a];F(c){G d=J.1v[a];F(!d){E.1G(c,"2O");J.1v[a]=b}O{E.1j(c,"2O");6U J.1v[a]}}}};E.1a.6T=N(a){J.3r=a};E.1a.1p=N(a){F(!a.4w(J.1c)){J.2G(J.2b,a)}};E.1a.5D=N(){J.2G(J.2b,J.1c)};E.1a.5Y=N(a){J.2G(a,J.1c);J.4g()};E.1a.4L=E.1a.6S=N(a){J.2I=a};E.1a.4R=N(a,z){J.2l=a;J.2k=z};E.1a.3o=N(){F(J.4s){J.4s(J,J.1c.2a(J.3s))}};E.1a.2L=N(){F(J.2Y){J.2Y(J)}J.2M()};E.1a.6R=N(){G a=J.1u.1y;a.43(J.1u);E.1D=X;1i.2y=X};E.1a.6Q=N(a){G b=J.1u;b.1y.43(b);a.2g(b)};E.4t=N(a){G b=1i.2y;F(!b){Q 17}G c=E.1z?E.2q(a):E.2U(a);1h(;c!=X&&c!=b.1u;c=c.1y);F(c==X){1i.2y.2L();Q E.1P(a)}};E.1a.4y=N(){G b=J.2E.2X("2n");1h(G i=b.1o;i>0;){G a=b[--i];E.1j(a,"3n");G c=a.2X("1Z");1h(G j=c.1o;j>0;){G d=c[--j];E.1j(d,"1t");E.1j(d,"26")}}J.1u.1l.1H="36";J.2D=17;F(J.1R){1i.2y=J;E.1C(1b,"5i",E.2S);E.1C(1b,"4c",E.2S);E.1C(1b,"3w",E.4t)}J.2M()};E.1a.4m=N(){F(J.1R){E.1V(1b,"5i",E.2S);E.1V(1b,"4c",E.2S);E.1V(1b,"3w",E.4t)}J.1u.1l.1H="2i";J.2D=1f;J.2M()};E.1a.3t=N(x,y){G s=J.1u.1l;s.2j=x+"1Q";s.3c=y+"1Q";J.4y()};E.1a.5A=N(f,g){G e=J;G p=E.2p(f);F(!g||1m g!="65"){J.3t(p.x,p.y+f.1Y);Q 1f}N 5W(b){F(b.x<0)b.x=0;F(b.y<0)b.y=0;G a=1b.1e("1K");G s=a.1l;s.2F="5U";s.6O=s.6N=s.42=s.4x="6M";1b.20.2g(a);G c=E.2p(a);1b.20.43(a);F(E.1z){c.y+=1b.20.35;c.x+=1b.20.3a}O{c.y+=1i.5h;c.x+=1i.5g}G d=b.x+b.42-c.x;F(d>0)b.x-=d;d=b.y+b.4x-c.y;F(d>0)b.y-=d};J.1u.1l.1H="36";E.4C=N(){G w=e.1u.1L;G h=e.1u.1Y;e.1u.1l.1H="2i";G b=g.22(0,1);G a="l";F(g.1o>1){a=g.22(1,1)}2f(b){14"T":p.y-=h;18;14"B":p.y+=f.1Y;18;14"C":p.y+=(f.1Y-h)/2;18;14"t":p.y+=f.1Y-h;18;14"b":18}2f(a){14"L":p.x-=w;18;14"R":p.x+=f.1L;18;14"C":p.x+=(f.1L-w)/2;18;14"l":p.x+=f.1L-w;18;14"r":18}p.42=w;p.4x=h+40;e.2N.1l.1H="2i";5W(p);e.3t(p.x,p.y)};F(E.3D)52("E.4C()",10);O E.4C()};E.1a.4I=N(a){J.3s=a};E.1a.89=N(a){J.4H=a};E.1a.3T=N(a,b){F(!b)b=J.3s;J.1p(16.3T(a,b))};E.1a.2M=N(){F(!E.1z&&!E.68)Q;N 3Y(a){G b=a.1l.2h;F(!b){F(1b.4z&&1m(1b.4z.5f)=="N"){F(!E.3D)b=1b.4z.5f(a,"").6K("2h");O b=\'\'}O F(a.5e){b=a.5e.2h}O b=\'\'}Q b};G c=1d 2K("6J","6H","8h");G q=J.1u;G p=E.2p(q);G m=p.x;G o=q.1L+m;G d=p.y;G e=q.1Y+d;1h(G k=c.1o;k>0;){G l=1b.2X(c[--k]);G n=X;1h(G i=l.1o;i>0;){n=l[--i];p=E.2p(n);G f=p.x;G g=n.1L+f;G h=p.y;G j=n.1Y+h;F(J.2D||(f>o)||(g<m)||(h>e)||(j<d)){F(!n.3d){n.3d=3Y(n)}n.1l.2h=n.3d}O{F(!n.3d){n.3d=3Y(n)}n.1l.2h="2D"}}}};E.1a.4g=N(){G c=J.2b;G d=J.57;G b=E.1n["5o"];1h(G i=0;i<7;++i){d.19="4i 5J";G a=(i+c)%7;F(i){d.1r=E.1n["6G"].5d("%s",E.4X[a]);d.1k=25;d.1x=J;d.5X=a;E.2u(d)}F(b.5l(a.6F())!=-1){E.1G(d,"5k")}d.1g=E.3L[(i+c)%7];d=d.2R}};E.1a.6t=N(){J.2N.1l.1H="2i";J.3O.1l.1H="2i"};E.1a.6m=N(c){F(J.2W){Q}J.2W=1f;G a;G b;F(E.1z){b=1i.1M.55+1b.20.35;a=1i.1M.3S+1b.20.3a}O{b=c.55+1i.5h;a=c.3S+1i.5g}G d=J.1u.1l;J.6o=a-1E(d.2j);J.6n=b-1E(d.3c);2A(E){1C(1b,"3b",56);1C(1b,"3U",53)}};16.6E=1d 2K(31,28,31,30,31,30,31,31,30,31,30,31);16.6D=6C;16.6B=60*16.6D;16.6z=60*16.6B;16.4O=24*16.6z;16.8P=7*16.4O;16.3T=N(f,h){G e=1d 16();G y=0;G m=-1;G d=0;G a=f.5N(/\\W+/);G b=h.4D(/%./g);G i=0,j=0;G c=0;G g=0;1h(i=0;i<a.1o;++i){F(!a[i])2V;2f(b[i]){14"%d":14"%e":d=1E(a[i],10);18;14"%m":m=1E(a[i],10)-1;18;14"%Y":14"%y":y=1E(a[i],10);(y<25)&&(y+=(y>29)?4q:6x);18;14"%b":14"%B":1h(j=0;j<12;++j){F(E.2r[j].22(0,a[i].1o).3H()==a[i].3H()){m=j;18}}18;14"%H":14"%I":14"%k":14"%l":c=1E(a[i],10);18;14"%P":14"%p":F(/2z/i.1F(a[i])&&c<12)c+=12;O F(/2v/i.1F(a[i])&&c>=12)c-=12;18;14"%M":g=1E(a[i],10);18}}F(3i(y))y=e.1s();F(3i(m))m=e.1q();F(3i(d))d=e.1w();F(3i(c))c=e.2t();F(3i(g))g=e.2s();F(y!=0&&m!=-1&&d!=0)Q 1d 16(y,m,d,c,g,0);y=0;m=-1;d=0;1h(i=0;i<a.1o;++i){F(a[i].8N(/[a-8M-Z]+/)!=-1){G t=-1;1h(j=0;j<12;++j){F(E.2r[j].22(0,a[i].1o).3H()==a[i].3H()){t=j;18}}F(t!=-1){F(m!=-1){d=m+1}m=t}}O F(1E(a[i],10)<=12&&m==-1){m=a[i]-1}O F(1E(a[i],10)>31&&y==0){y=1E(a[i],10);(y<25)&&(y+=(y>29)?4q:6x)}O F(d==0){d=a[i]}}F(y==0)y=e.1s();F(m!=-1&&d!=0)Q 1d 16(y,m,d,c,g,0);Q e};16.1a.4U=N(a){G b=J.1s();F(1m a=="1B"){a=J.1q()}F(((0==(b%4))&&((0!=(b%25))||(0==(b%4S))))&&a==1){Q 29}O{Q 16.6E[a]}};16.1a.6w=N(){G c=1d 16(J.1s(),J.1q(),J.1w(),0,0,0);G a=1d 16(J.1s(),0,0,0,0,0);G b=c-a;Q 2m.3Q(b/16.4O)};16.1a.45=N(){G d=1d 16(J.1s(),J.1q(),J.1w(),0,0,0);G a=d.3z();d.1p(d.1w()-(a+6)%7+3);G b=d.6v();d.1T(0);d.1p(4);Q 2m.8L((b-d.6v())/(7*8K))+1};16.1a.4w=N(a){Q((J.1s()==a.1s())&&(J.1q()==a.1q())&&(J.1w()==a.1w())&&(J.2t()==a.2t())&&(J.2s()==a.2s()))};16.1a.4W=N(b){G a=1d 16(b);J.1p(1);J.1J(a.1s());J.1T(a.1q());J.1p(a.1w())};16.1a.2a=N(g){G m=J.1q();G d=J.1w();G y=J.1s();G f=J.45();G w=J.3z();G s={};G e=J.2t();G n=(e>=12);G j=(n)?(e-12):e;G b=J.6w();F(j==0)j=12;G l=J.2s();G h=J.8J();s["%a"]=E.3L[w];s["%A"]=E.4X[w];s["%b"]=E.3G[m];s["%B"]=E.2r[m];s["%C"]=1+2m.3Q(y/25);s["%d"]=(d<10)?("0"+d):d;s["%e"]=d;s["%H"]=(e<10)?("0"+e):e;s["%I"]=(j<10)?("0"+j):j;s["%j"]=(b<25)?((b<10)?("8I"+b):("0"+b)):b;s["%k"]=e;s["%l"]=j;s["%m"]=(m<9)?("0"+(1+m)):(1+m);s["%M"]=(l<10)?("0"+l):l;s["%n"]="\\n";s["%p"]=n?"8H":"8G";s["%P"]=n?"2z":"2v";s["%s"]=2m.3Q(J.8F()/6C);s["%S"]=(h<10)?("0"+h):h;s["%t"]="\\t";s["%U"]=s["%W"]=s["%V"]=(f<10)?("0"+f):f;s["%u"]=w+1;s["%w"]=w;s["%y"]=(\'\'+y).22(2,2);s["%Y"]=y;s["%%"]="%";G c=/%./g;F(!E.4J&&!E.3D)Q g.5d(c,N(a){Q s[a]||a});G a=g.4D(c);1h(G i=0;i<a.1o;i++){G k=s[a[i]];F(k){c=1d 8E(a[i],\'g\');g=g.5d(c,k)}}Q g};16.1a.5a=16.1a.1J;16.1a.1J=N(y){G d=1d 16(J);d.5a(y);F(d.1q()!=J.1q())J.1p(28);J.5a(y)};1i.2y=X;',
62,548,"                                        Calendar if var   this    function else  return       null       case  Date false break className prototype document date new createElement true innerHTML for window removeClass navtype style typeof _TT length setDate getMonth ttip getFullYear hilite element multiple getDate calendar parentNode is_ie weekNumbers undefined addEvent _C parseInt test addClass display disabled setFullYear div offsetWidth event timeout cellClick stopEvent px isPopup hilitedYear setMonth hilitedMonth removeEvent currentDateEl ne offsetHeight td body iday substr   100 active    print firstDayOfWeek showsTime ar_days dateClicked switch appendChild visibility none left maxYear minYear Math tr title getAbsolutePos getElement _MN getMinutes getHours _add_evs am activeDiv onSelect _dynarch_popupCalendar pm with month log hidden table position _init step getDateStatus year Array callCloseHandler hideShowCovered monthsCombo selected _range on nextSibling _keyEvent flat getTargetElement continue dragging getElementsByTagName onClose range    offsetLeft ifFormat scrollTop block    scrollLeft mousemove top __msh_save_visibility firstChild getDateText userAgent navigator isNaN showsOtherMonths while caldate tableMouseOver rowhilite callHandler button get getDateToolTip dateFormat showAt setVars yearStep mousedown makeTimePart time getDay label jQuery mouseover is_khtml tableMouseUp time24 _SMN toLowerCase otherMonth colSpan 300 _SDN activeYear activeMonth yearsCombo onUpdateTime floor tbody clientX parseDate mouseup dynDateTime displayArea opts getVisib err  onUpdate width removeChild daFormat getWeekNumber datesCells prevMonth flatCallback el try console keypress onSetTime eval nbsp _displayWeekdays nextMonth day findMonth _nav_ny _nav_nm hide _nav_now _nav_pm findYear 1900 _nav_py onSelected _checkCalendar catch offsetTop equalsTo height show defaultView ST create continuation_for_the_fucking_khtml_browser match to showYearsCombo showOthers ttDateFormat setDateFormat is_ie5 you setDateStatusHandler clearTimeout firstDay DAY isRelated and setRange 400 dateText getMonthDays _SMN_len setDateOnly _DN tooltips dateStatusFunc  _SDN_len setTimeout calDragEnd timeFormat clientY calDragIt firstdayname value  __msh_oldSetFullYear dateStr fn replace currentStyle getComputedStyle scrollX scrollY keydown _initMultipleDates weekend indexOf unselectable dayMouseDblClick WEEKEND TD dayMouseOut TY dayMouseDown dayMouseOver pos http IEfix createElementNS combo default showAtElement removeEventListener detachEvent refresh addEventListener attachEvent span TM wn name nodeType srcElement dpos split move cursor DRAG_TO_MOVE mouseout type showMonthsCombo absolute offsetParent fixPosition fdow setFirstDayOfWeek debug  tagName com it align string in the is_opera cache opera language into defaults msie 200 _toggleMultipleDate SEL_DATE _ electric eventName 250 _dragStart yOffs xOffs onchange tableMouseDown _current abs _hideCombos hiliteToday valueOf getDayOfYear 2000 number HOUR singleClick MINUTE 1000 SECOND _MD toString DAY_FIRST iframe TT_DATE_FORMAT applet getPropertyValue DEF_DATE_FORMAT 0px bottom right 2050 reparent destroy setDisabledHandler setDateToolTipHandler delete 1970 emptyrow oweekend PART_TODAY today emptycell othermonth daysrow setAttribute dblclick xhtml 1999 org ctrlKey keyCode w3 www loadFirebugConsole footrow tfoot setMinutes setHours ampm minute colon hour stopPropagation preventDefault TIME_PART returnValue cancelBubble TIME target WK daynames NEXT_YEAR currentTarget each 2999 x00bb NEXT_MONTH x203a GO_TODAY TODAY PREV_MONTH join x2039 PREV_YEAR x00ab headrow CLOSE x00d7 toElement INFO visible extend nav fromElement thead relatedTarget cellPadding cellSpacing clicked shiftKey alert epl mishoo Br dynarch Thank distribution yahoo mihai_bazon back send js setTtDateFormat en KHTML rar subdir Safari lang Konqueror select file corresponding update please generous feel know If translated not is text click box about Help ABOUT_TIME ABOUT empty selection pageY pageX RegExp getTime AM PM 00 getSeconds 864e5 round zA search _FD WEEK".split(" "),
0,{}));Calendar._DN="\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435".split(" ");Calendar._SDN="\u0432\u0441\u043a \u043f\u043e\u043d \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0435\u0442 \u043f\u044f\u0442 \u0441\u0443\u0431 \u0432\u0441\u043a".split(" ");
Calendar._FD=0;Calendar._MN="\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" ");Calendar._SMN="\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" ");
Calendar._TT={};Calendar._TT.INFO="\u041e \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0435...";
Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\n\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u0443:\n- \u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043a\u043d\u043e\u043f\u043e\u043a \u00ab, \u00bb \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0434\n- \u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043a\u043d\u043e\u043f\u043e\u043a "+String.fromCharCode(8249)+
", "+String.fromCharCode(8250)+" \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0435\u0441\u044f\u0446\n- \u041f\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0435 \u044d\u0442\u0438 \u043a\u043d\u043e\u043f\u043a\u0438 \u043d\u0430\u0436\u0430\u0442\u044b\u043c\u0438, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u044f\u0432\u0438\u043b\u043e\u0441\u044c \u043c\u0435\u043d\u044e \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u0432\u044b\u0431\u043e\u0440\u0430.";
Calendar._TT.ABOUT_TIME="\n\n\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u044f:\n- \u041f\u0440\u0438 \u043a\u043b\u0438\u043a\u0435 \u043d\u0430 \u0447\u0430\u0441\u0430\u0445 \u0438\u043b\u0438 \u043c\u0438\u043d\u0443\u0442\u0430\u0445 \u043e\u043d\u0438 \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f\n- \u043f\u0440\u0438 \u043a\u043b\u0438\u043a\u0435 \u0441 \u043d\u0430\u0436\u0430\u0442\u043e\u0439 \u043a\u043b\u0430\u0432\u0438\u0448\u0435\u0439 Shift \u043e\u043d\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u044e\u0442\u0441\u044f\n- \u0435\u0441\u043b\u0438 \u043d\u0430\u0436\u0430\u0442\u044c \u0438 \u0434\u0432\u0438\u0433\u0430\u0442\u044c \u043c\u044b\u0448\u043a\u043e\u0439 \u0432\u043b\u0435\u0432\u043e/\u0432\u043f\u0440\u0430\u0432\u043e, \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u0431\u044b\u0441\u0442\u0440\u0435\u0435.";
Calendar._TT.PREV_YEAR="\u041d\u0430 \u0433\u043e\u0434 \u043d\u0430\u0437\u0430\u0434 (\u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043c\u0435\u043d\u044e)";Calendar._TT.PREV_MONTH="\u041d\u0430 \u043c\u0435\u0441\u044f\u0446 \u043d\u0430\u0437\u0430\u0434 (\u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043c\u0435\u043d\u044e)";Calendar._TT.GO_TODAY="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";Calendar._TT.NEXT_MONTH="\u041d\u0430 \u043c\u0435\u0441\u044f\u0446 \u0432\u043f\u0435\u0440\u0435\u0434 (\u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043c\u0435\u043d\u044e)";
Calendar._TT.NEXT_YEAR="\u041d\u0430 \u0433\u043e\u0434 \u0432\u043f\u0435\u0440\u0435\u0434 (\u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043c\u0435\u043d\u044e)";Calendar._TT.SEL_DATE="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443";Calendar._TT.DRAG_TO_MOVE="\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439\u0442\u0435 \u043c\u044b\u0448\u043a\u043e\u0439";Calendar._TT.PART_TODAY=" (\u0441\u0435\u0433\u043e\u0434\u043d\u044f)";
Calendar._TT.DAY_FIRST="\u041f\u0435\u0440\u0432\u044b\u0439 \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438 \u0431\u0443\u0434\u0435\u0442 %s";Calendar._TT.WEEKEND="0,6";Calendar._TT.CLOSE="\u0417\u0430\u043a\u0440\u044b\u0442\u044c";Calendar._TT.TODAY="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";Calendar._TT.TIME_PART="(Shift-)\u043a\u043b\u0438\u043a \u0438\u043b\u0438 \u043d\u0430\u0436\u0430\u0442\u044c \u0438 \u0434\u0432\u0438\u0433\u0430\u0442\u044c";
Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d";Calendar._TT.TT_DATE_FORMAT="%e %b, %a";Calendar._TT.WK="\u043d\u0435\u0434";Calendar._TT.TIME="\u0412\u0440\u0435\u043c\u044f:";
jQuery.cookie=function(b,c,a){if(1<arguments.length&&"[object Object]"!==String(c)){a=jQuery.extend({},a);if(null===c||void 0===c)a.expires=-1;if("number"===typeof a.expires){var d=a.expires,f=a.expires=new Date;f.setDate(f.getDate()+d)}c=String(c);return document.cookie=[encodeURIComponent(b),"=",a.raw?c:encodeURIComponent(c),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}a=c||{};f=a.raw?function(b){return b}:
decodeURIComponent;return(d=RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)").exec(document.cookie))?f(d[1]):null};
function Dialog(b){this.timeShow=3E3;this.animateTime=100;this.o=b||{};this.disableAllButtons=!0;$("body").prepend($('<div class="dialog"><div class="dialog_text"></div></div>'));this.element=$(".dialog").css("cursor","pointer").attr("title","\u0417\u0430\u043a\u0440\u044b\u0442\u044c");this.window=$(window);this.infoBox=$(".dialog .dialog_text");var c=this;this.element.bind("click",function(){c.hide()});this.window.size=[this.window.width(),this.window.height()]}
Dialog.prototype.show=function(b,c,a){this.infoBox.addClass(c).html(b);this.element.size=[this.element.width(),this.element.height()];if(!1==this.element.is(":visible")){this.disableAllButtons&&this._disableAllButtons();this.element.css({top:-1*this.element.size[1],left:Math.floor(this.window.size[0]/2)-Math.floor(this.element.size[0]/2)}).show();"animate"==this.o.type?this.element.animate({top:Math.floor(this.window.size[1]/2)-Math.floor(this.element.size[1]/2)},this.animateTime):"opacity"==this.o.type&&
(this.element.css({top:Math.floor(this.window.size[1]/2)-Math.floor(this.element.size[1]/2),opacity:0}),this.element.animate({opacity:1},this.animateTime));$("#anonsdpua").animate({opacity:0.5},this.animateTime);var d=this;setTimeout(function(){d.hide();"function"==typeof a&&a()},this.timeShow)}};
Dialog.prototype.hide=function(){this.disableAllButtons&&this._enableAllButtons();var b=this;"animate"==this.o.type?this.element.animate({top:-1*this.element.size[1]},this.animateTime,function(){b.element.hide()}):"opacity"==this.o.type&&this.element.animate({opacity:0},this.animateTime,function(){b.element.hide()});$("#anonsdpua").animate({opacity:1},this.animateTime)};Dialog.prototype._disableAllButtons=function(){$(":button, :submit").attr("disabled","disabled")};
Dialog.prototype._enableAllButtons=function(){$(":button, :submit").removeAttr("disabled")};
jQuery.fn.highlight=function(b){function c(b,d){var f=0;if(3==b.nodeType){var e=b.data.toUpperCase().indexOf(d);if(0<=e){f=document.createElement("span");f.className="highlight";e=b.splitText(e);e.splitText(d.length);var h=e.cloneNode(!0);f.appendChild(h);e.parentNode.replaceChild(f,e);f=1}}else if(1==b.nodeType&&b.childNodes&&!/(script|style)/i.test(b.tagName))for(e=0;e<b.childNodes.length;++e)e+=c(b.childNodes[e],d);return f}return this.each(function(){if(""!=b)for(var a=b.split(" "),d=0;d<a.length;d++)c(this,
a[d].toUpperCase())})};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;with(this.parentNode)replaceChild(this.firstChild,this),normalize()}).end()};
(function(b){function c(b){return"object"==typeof b?b:{top:b,left:b}}var a=b.scrollTo=function(a,f,e){b(window).scrollTo(a,f,e)};a.defaults={axis:"xy",duration:1.3<=parseFloat(b.fn.jquery)?0:1};a.window=function(){return b(window)._scrollable()};b.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return b.browser.safari||
"BackCompat"==a.compatMode?a.body:a.documentElement})};b.fn.scrollTo=function(d,f,e){"object"==typeof f&&(e=f,f=0);"function"==typeof e&&(e={onAfter:e});"max"==d&&(d=9E9);e=b.extend({},a.defaults,e);f=f||e.speed||e.duration;e.queue=e.queue&&1<e.axis.length;e.queue&&(f/=2);e.offset=c(e.offset);e.over=c(e.over);return this._scrollable().each(function(){function h(b){j.animate(l,f,e.easing,b&&function(){b.call(this,d,e)})}var g=this,j=b(g),k=d,p,l={},r=j.is("html,body");switch(typeof k){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=
c(k);break}k=b(k,this);case "object":if(k.is||k.style)p=(k=b(k)).offset()}b.each(e.axis.split(""),function(b,f){var c="x"==f?"Left":"Top",d=c.toLowerCase(),m="scroll"+c,v=g[m],w=a.max(g,f);p?(l[m]=p[d]+(r?0:v-j.offset()[d]),e.margin&&(l[m]-=parseInt(k.css("margin"+c))||0,l[m]-=parseInt(k.css("border"+c+"Width"))||0),l[m]+=e.offset[d]||0,e.over[d]&&(l[m]+=k["x"==f?"width":"height"]()*e.over[d])):(c=k[d],l[m]=c.slice&&"%"==c.slice(-1)?parseFloat(c)/100*w:c);/^\d+$/.test(l[m])&&(l[m]=0>=l[m]?0:Math.min(l[m],
w));!b&&e.queue&&(v!=l[m]&&h(e.onAfterFirst),delete l[m])});h(e.onAfter)}).end()};a.max=function(a,f){var e="x"==f?"Width":"Height",c="scroll"+e;if(!b(a).is("html,body"))return a[c]-b(a)[e.toLowerCase()]();var e="client"+e,g=a.ownerDocument.documentElement,j=a.ownerDocument.body;return Math.max(g[c],j[c])-Math.min(g[e],j[e])}})(jQuery);
(function(b){if(b){b.ajax_upload=function(a,e){a=b(a);return 1!=a.size()?(console.error("You passed ",a.size()," elements to ajax_upload at once"),!1):new d(a,e)};var c,a=0;c=function(){return a++};var d=function(a,e){this.button=a;this.iframe=this.input=this.form=this.wrapper=null;this.submitting=this.disabled=!1;this.settings={action:"upload.php",name:"userfile",data:{},onSubmit:function(){},onComplete:function(){},onSuccess:function(){},onError:function(){}};b.extend(this.settings,e);this.create_wrapper();
this.create_input();jQuery.browser.msie&&this.make_parent_opaque();this.create_iframe()};d.prototype={set_data:function(b){this.settings.data=b},disable:function(){this.disabled=!0;this.submitting||this.input.attr("disabled",!0)},enable:function(){this.disabled=!1;this.input.attr("disabled",!1)},create_wrapper:function(){var a=this.button,e;e=this.wrapper=b("<div></div>").insertAfter(a).append(a);setTimeout(function(){e.css({position:"relative",display:"inline-block"})},1);var c=this;e.mousemove(function(b){c.input&&
c.input.css({top:b.pageY-e.offset().top-5+"px",left:b.pageX-e.offset().left-170+"px"})})},create_input:function(){var a=this;this.input=b('<input type="file" />').attr("name",this.settings.name).css({position:"absolute",margin:0,padding:0,width:"220px",heigth:"10px",opacity:0,cursor:"pointer"}).change(function(){""!=b(this).val()&&(a.submitting=!0,a.submit(),a.submitting=!1)}).appendTo(this.wrapper).hover(function(){a.button.addClass("hover")},function(){a.button.removeClass("hover")});this.disabled&&
this.input.attr("disabled",!0)},create_iframe:function(){var a="iframe_au"+c();this.iframe=b('<iframe name="'+a+'"></iframe>').css("display","none").appendTo("body")},submit:function(){var b=this,a=this.settings,c=this.file_from_path(this.input.val());if(!1===a.onSubmit.call(this,c,this.get_ext(c)))b.disabled&&this.input.attr("disabled",!0);else{this.create_form();this.input.appendTo(this.form);this.form.submit();this.input.remove();this.input=null;this.form.remove();this.form=null;this.submitting=
!1;this.create_input();var d=this.iframe;d.load(function(){var j=d.contents().find("body").html();a.onComplete.call(b,c,j);"success"==j?a.onSuccess.call(b,c):a.onError.call(b,c,j);setTimeout(function(){d.remove()},1)});this.create_iframe()}},create_form:function(){this.form=b('<form method="post" enctype="multipart/form-data"></form>').appendTo("body").attr({action:this.settings.action,target:this.iframe.attr("name")});for(var a in this.settings.data)b('<input type="hidden" />').appendTo(this.form).attr({name:a,
value:this.settings.data[a]})},file_from_path:function(b){var a=b.lastIndexOf("\\");return-1!==a?b.slice(a+1):b},get_ext:function(b){var a=b.lastIndexOf(".");return-1!==a?b.slice(a+1):""},make_parent_opaque:function(){this.button.add(this.button.parents()).each(function(){var a=b(this).css("backgroundColor"),c=b(this).css("backgroundImage");if("transparent"!=a||"none"!=c)return b(this).css("opacity",1),!1})}}}})(jQuery);
(function(b,c){function a(a,c){var h=a.nodeName.toLowerCase();if("area"===h){var h=a.parentNode,g=h.name;if(!a.href||!g||"map"!==h.nodeName.toLowerCase())return!1;h=b("img[usemap=#"+g+"]")[0];return!!h&&d(h)}return(/input|select|textarea|button|object/.test(h)?!a.disabled:"a"==h?a.href||c:c)&&d(a)}function d(a){return!b(a).parents().andSelf().filter(function(){return"hidden"===b.curCSS(this,"visibility")||b.expr.filters.hidden(this)}).length}b.ui=b.ui||{};b.ui.version||(b.extend(b.ui,{version:"1.8.18",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),b.fn.extend({propAttr:b.fn.prop||b.fn.attr,_focus:b.fn.focus,focus:function(a,c){return"number"===typeof a?this.each(function(){var d=
this;setTimeout(function(){b(d).focus();c&&c.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=b.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.curCSS(this,"position",1))&&/(auto|scroll)/.test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.curCSS(this,
"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(a!==c)return this.css("zIndex",a);if(this.length)for(var a=b(this[0]),e;a.length&&a[0]!==document;){e=a.css("position");if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(a.css("zIndex"),10),!isNaN(e)&&0!==e)return e;a=a.parent()}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),b.each(["Width","Height"],function(a,e){function d(a,c,e,f){b.each(g,function(){c-=parseFloat(b.curCSS(a,"padding"+this,!0))||0;e&&(c-=parseFloat(b.curCSS(a,"border"+this+"Width",!0))||0);f&&(c-=parseFloat(b.curCSS(a,"margin"+this,!0))||0)});return c}var g="Width"===e?["Left","Right"]:["Top","Bottom"],j=e.toLowerCase(),k={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,
outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+e]=function(a){return a===c?k["inner"+e].call(this):this.each(function(){b(this).css(j,d(this,a)+"px")})};b.fn["outer"+e]=function(a,c){return"number"!==typeof a?k["outer"+e].call(this,a):this.each(function(){b(this).css(j,d(this,a,!0,c)+"px")})}}),b.extend(b.expr[":"],{data:function(a,c,d){return!!b.data(a,d[3])},focusable:function(c){return a(c,!isNaN(b.attr(c,"tabindex")))},tabbable:function(c){var e=b.attr(c,"tabindex"),d=isNaN(e);
return(d||0<=e)&&a(c,!d)}}),b(function(){var a=document.body,c=a.appendChild(c=document.createElement("div"));c.offsetHeight;b.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=100===c.offsetHeight;b.support.selectstart="onselectstart"in c;a.removeChild(c).style.display="none"}),b.extend(b.ui,{plugin:{add:function(a,c,d){var a=b.ui[a].prototype,g;for(g in d)a.plugins[g]=a.plugins[g]||[],a.plugins[g].push([c,d[g]])},call:function(a,b,c){if((b=a.plugins[b])&&
a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,c){if("hidden"===b(a).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",g=!1;if(0<a[d])return!0;a[d]=1;g=0<a[d];a[d]=0;return g},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,c,d,g,j,k){return b.ui.isOverAxis(a,d,j)&&b.ui.isOverAxis(c,
g,k)}}))})(jQuery);
(function(b,c){if(b.cleanData){var a=b.cleanData;b.cleanData=function(c){for(var e=0,d;null!=(d=c[e]);e++)try{b(d).triggerHandler("remove")}catch(g){}a(c)}}else{var d=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){c||(!a||b.filter(a,[this]).length)&&b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(a){}});return d.call(b(this),a,c)})}}b.widget=function(a,c,d){var g=a.split(".")[0],j,a=a.split(".")[1];j=g+"-"+a;d||(d=c,c=b.Widget);b.expr[":"][j]=
function(c){return!!b.data(c,a)};b[g]=b[g]||{};b[g][a]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=b.extend(!0,{},c.options);b[g][a].prototype=b.extend(!0,c,{namespace:g,widgetName:a,widgetEventPrefix:b[g][a].prototype.widgetEventPrefix||a,widgetBaseClass:j},d);b.widget.bridge(a,b[g][a])};b.widget.bridge=function(a,e){b.fn[a]=function(d){var g="string"===typeof d,j=Array.prototype.slice.call(arguments,1),k=this,d=!g&&j.length?b.extend.apply(null,[!0,d].concat(j)):d;
if(g&&"_"===d.charAt(0))return k;g?this.each(function(){var e=b.data(this,a),g=e&&b.isFunction(e[d])?e[d].apply(e,j):e;if(g!==e&&g!==c)return k=g,!1}):this.each(function(){var c=b.data(this,a);c?c.option(d||{})._init():b.data(this,a,new e(d,this))});return k}};b.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(!0,
{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,e){var d=a;if(0===arguments.length)return b.extend({},this.options);if("string"===typeof a){if(e===c)return this.options[a];d={};d[a]=e}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,c,d){var g,j=this.options[a],d=d||{},c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();c.target=this.element[0];if(a=c.originalEvent)for(g in a)g in c||(c[g]=a[g]);this.element.trigger(c,d);return!(b.isFunction(j)&&!1===j.call(this.element[0],c,d)||c.isDefaultPrevented())}}})(jQuery);
(function(b){var c=!1;b(document).mouseup(function(){c=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(c){if(!0===b.data(c.target,a.widgetName+".preventClickEvent"))return b.removeData(c.target,a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(a){if(!c){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var d=this,f=1==a.which,e="string"==typeof this.options.cancel&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:!1;if(!f||e||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=
!1!==this._mouseStart(a),!this._mouseStarted))return a.preventDefault(),!0;!0===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return c=!0}},_mouseMove:function(a){if(b.browser.msie&&
!(9<=document.documentMode)&&!a.button)return this._mouseUp(a);if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=
!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b){b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,a=this.options,d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=a.values&&a.values.length||1,e=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(a.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);a.range&&(!0===a.range&&(a.values||(a.values=[this._valueMin(),this._valueMin()]),a.values.length&&2!==a.values.length&&(a.values=[a.values[0],a.values[0]])),this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===a.range||"max"===a.range?" ui-slider-range-"+a.range:"")));for(var h=d.length;h<f;h+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=d.add(b(e.join("")).appendTo(c.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){a.disabled||b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).focus(function(){a.disabled?b(this).blur():(b(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),b(this).addClass("ui-state-focus"))}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(a){b(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(a){var d=b(this).data("index.ui-slider-handle"),e,f,h;if(!c.options.disabled){switch(a.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(a.preventDefault(),!c._keySliding&&(c._keySliding=!0,b(this).addClass("ui-state-active"),e=c._start(a,d),!1===e))return}h=c.options.step;e=c.options.values&&c.options.values.length?
f=c.values(d):f=c.value();switch(a.keyCode){case b.ui.keyCode.HOME:f=c._valueMin();break;case b.ui.keyCode.END:f=c._valueMax();break;case b.ui.keyCode.PAGE_UP:f=c._trimAlignValue(e+(c._valueMax()-c._valueMin())/5);break;case b.ui.keyCode.PAGE_DOWN:f=c._trimAlignValue(e-(c._valueMax()-c._valueMin())/5);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(e===c._valueMax())return;f=c._trimAlignValue(e+h);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(e===c._valueMin())return;f=c._trimAlignValue(e-
h)}c._slide(a,d,f)}}).keyup(function(a){var d=b(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(a,d),c._change(a,d),b(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(c){var a=this.options,d,f,e,h,g;if(a.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();d=this._normValueFromMouse({x:c.pageX,y:c.pageY});f=this._valueMax()-this._valueMin()+1;h=this;this.handles.each(function(a){var c=Math.abs(d-h.values(a));f>c&&(f=c,e=b(this),g=a)});!0===a.range&&this.values(1)===a.min&&(g+=1,e=b(this.handles[g]));if(!1===this._start(c,g))return!1;this._mouseSliding=
!0;h._handleIndex=g;e.addClass("ui-state-active").focus();a=e.offset();this._clickOffset=!b(c.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:c.pageX-a.left-e.width()/2,top:c.pageY-a.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(c,g,d);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(b){var a=this._normValueFromMouse({x:b.pageX,
y:b.pageY});this._slide(b,this._handleIndex,a);return!1},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var a;"horizontal"===this.orientation?(a=this.elementSize.width,b=b.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(a=this.elementSize.height,b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));a=b/a;1<a&&(a=1);0>a&&(a=0);"vertical"===this.orientation&&(a=1-a);b=this._valueMax()-this._valueMin();a=this._valueMin()+a*b;return this._trimAlignValue(a)},_start:function(b,a){var d={handle:this.handles[a],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(a),d.values=this.values());return this._trigger("start",
b,d)},_slide:function(b,a,d){var f;if(this.options.values&&this.options.values.length){f=this.values(a?0:1);if(2===this.options.values.length&&!0===this.options.range&&(0===a&&d>f||1===a&&d<f))d=f;d!==this.values(a)&&(f=this.values(),f[a]=d,b=this._trigger("slide",b,{handle:this.handles[a],value:d,values:f}),this.values(a?0:1),!1!==b&&this.values(a,d,!0))}else d!==this.value()&&(b=this._trigger("slide",b,{handle:this.handles[a],value:d}),!1!==b&&this.value(d))},_stop:function(b,a){var d={handle:this.handles[a],
value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(a),d.values=this.values());this._trigger("stop",b,d)},_change:function(b,a){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[a],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(a),d.values=this.values());this._trigger("change",b,d)}},value:function(b){if(arguments.length)this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(c,a){var d,f,e;if(1<arguments.length)this.options.values[c]=this._trimAlignValue(a),this._refreshValue(),this._change(null,c);else if(arguments.length)if(b.isArray(arguments[0])){d=this.options.values;f=arguments[0];for(e=0;e<d.length;e+=1)d[e]=this._trimAlignValue(f[e]),this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(c):this.value();else return this._values()},_setOption:function(c,a){var d,
f=0;b.isArray(this.options.values)&&(f=this.options.values.length);b.Widget.prototype._setOption.apply(this,arguments);switch(c){case "disabled":a?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<f;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var a,d;if(arguments.length)return a=this.options.values[b],a=this._trimAlignValue(a);a=this.options.values.slice();for(d=0;d<a.length;d+=1)a[d]=
this._trimAlignValue(a[d]);return a},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var a=0<this.options.step?this.options.step:1,d=(b-this._valueMin())%a,b=b-d;2*Math.abs(d)>=a&&(b+=0<d?a:-a);return parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var c=this.options.range,a=this.options,d=this,f=!this._animateOff?a.animate:!1,e,h=
{},g,j,k,p;if(this.options.values&&this.options.values.length)this.handles.each(function(c){e=100*((d.values(c)-d._valueMin())/(d._valueMax()-d._valueMin()));h["horizontal"===d.orientation?"left":"bottom"]=e+"%";b(this).stop(1,1)[f?"animate":"css"](h,a.animate);if(!0===d.options.range)if("horizontal"===d.orientation){if(0===c)d.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},a.animate);if(1===c)d.range[f?"animate":"css"]({width:e-g+"%"},{queue:!1,duration:a.animate})}else{if(0===c)d.range.stop(1,
1)[f?"animate":"css"]({bottom:e+"%"},a.animate);if(1===c)d.range[f?"animate":"css"]({height:e-g+"%"},{queue:!1,duration:a.animate})}g=e});else{j=this.value();k=this._valueMin();p=this._valueMax();e=p!==k?100*((j-k)/(p-k)):0;h["horizontal"===d.orientation?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](h,a.animate);if("min"===c&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},a.animate);if("max"===c&&"horizontal"===this.orientation)this.range[f?
"animate":"css"]({width:100-e+"%"},{queue:!1,duration:a.animate});if("min"===c&&"vertical"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},a.animate);if("max"===c&&"vertical"===this.orientation)this.range[f?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:a.animate})}}});b.extend(b.ui.slider,{version:"1.8.18"})})(jQuery);
(function(b,c){$window=b(c);b.fn.lazyload=function(a){function d(){var a=0;f.each(function(){var c=b(this);if((!e.skip_invisible||c.is(":visible"))&&!b.abovethetop(this,e)&&!b.leftofbegin(this,e))if(!b.belowthefold(this,e)&&!b.rightoffold(this,e))c.trigger("appear");else if(++a>e.failure_limit)return!1})}var f=this,e={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:c,data_attribute:"original",skip_invisible:!0,appear:null,load:null};a&&(void 0!==a.failurelimit&&(a.failure_limit=
a.failurelimit,delete a.failurelimit),void 0!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),b.extend(e,a));$container=void 0===e.container||e.container===c?$window:b(e.container);0===e.event.indexOf("scroll")&&$container.bind(e.event,function(){return d()});this.each(function(){var a=this,c=b(a);a.loaded=!1;c.one("appear",function(){this.loaded||(e.appear&&e.appear.call(a,f.length,e),b("<img />").bind("load",function(){c.hide().attr("src",c.data(e.data_attribute))[e.effect](e.effect_speed);
a.loaded=!0;var d=b.grep(f,function(a){return!a.loaded});f=b(d);e.load&&e.load.call(a,f.length,e)}).attr("src",c.data(e.data_attribute)))});0!==e.event.indexOf("scroll")&&c.bind(e.event,function(){a.loaded||c.trigger("appear")})});$window.bind("resize",function(){d()});d();return this};b.belowthefold=function(a,d){return(void 0===d.container||d.container===c?$window.height()+$window.scrollTop():$container.offset().top+$container.height())<=b(a).offset().top-d.threshold};b.rightoffold=function(a,d){return(void 0===
d.container||d.container===c?$window.width()+$window.scrollLeft():$container.offset().left+$container.width())<=b(a).offset().left-d.threshold};b.abovethetop=function(a,d){return(void 0===d.container||d.container===c?$window.scrollTop():$container.offset().top)>=b(a).offset().top+d.threshold+b(a).height()};b.leftofbegin=function(a,d){return(void 0===d.container||d.container===c?$window.scrollLeft():$container.offset().left)>=b(a).offset().left+d.threshold+b(a).width()};b.inviewport=function(a,c){return!b.rightofscreen(a,
c)&&!b.leftofscreen(a,c)&&!b.belowthefold(a,c)&&!b.abovethetop(a,c)};b.extend(b.expr[":"],{"below-the-fold":function(a){return b.belowthefold(a,{threshold:0,container:c})},"above-the-top":function(a){return!b.belowthefold(a,{threshold:0,container:c})},"right-of-screen":function(a){return b.rightoffold(a,{threshold:0,container:c})},"left-of-screen":function(a){return!b.rightoffold(a,{threshold:0,container:c})},"in-viewport":function(a){return!b.inviewport(a,{threshold:0,container:c})},"above-the-fold":function(a){return!b.belowthefold(a,
{threshold:0,container:c})},"right-of-fold":function(a){return b.rightoffold(a,{threshold:0,container:c})},"left-of-fold":function(a){return!b.rightoffold(a,{threshold:0,container:c})}})})(jQuery,window);
(function(){function b(b,a){var d=this,b=jQuery(b),f=jQuery(document.createElement("div")).addClass(a.baseClass).addClass(a.fixed?a.fixedClass:"").addClass(a.persistent?a.persistentClass:"").html(a.content).appendTo(b);a.hidden?f.hide():f.show();a.persistent?(b.click(function(a){a.target===b.get(0)&&("none"!==f.css("display")?d.hide():d.show())}),jQuery(window).mousedown(function(b){"none"!==f.css("display")&&0===(a.focus?jQuery(b.target).parents(".tooltip").andSelf().filter(function(){return this===
f.get(0)}).length:0)&&d.hide()})):(b.hover(function(a){d.show(a)},function(){d.hide()}),a.fixed||b.mousemove(function(a){"none"!==f.css("display")&&d.updatePos(a)}));jQuery.extend(d,{getVersion:function(){return[1,2,0]},getParent:function(){return b},getTooltip:function(){return f},getPos:function(){return f.offset()},setPos:function(a,h){var g=b.offset();"string"==typeof a&&(a=parseInt(a)+g.left);"string"==typeof h&&(h=parseInt(h)+g.top);f.css({left:a,top:h});return d},show:function(b){a.onBeforeShow.call(d);
d.updatePos(a.fixed?null:b);switch(a.showEffect){case "fade":f.fadeIn(a.showTime);break;case "slide":f.slideDown(a.showTime,d.updatePos);break;case "custom":a.showCustom.call(f,a.showTime);break;default:case "none":f.show()}f.addClass(a.activeClass);a.onShow.call(d);return d},hide:function(){a.onBeforeHide.call(d);switch(a.hideEffect){case "fade":f.fadeOut(a.hideTime);break;case "slide":f.slideUp(a.hideTime);break;case "custom":a.hideCustom.call(f,a.hideTime);break;default:case "none":f.hide()}f.removeClass(a.activeClass);
a.onHide.call(d);return d},update:function(b){f.html(b);a.content=b;return d},load:function(b,c){a.beforeContentLoad.call(d);f.load(b,c,function(){a.onContentLoad.call(d)});return d},boundryCheck:function(a,b){var c=a+f.outerWidth(),d=b+f.outerHeight(),k=jQuery(window).width()+jQuery(window).scrollLeft(),p=jQuery(window).height()+jQuery(window).scrollTop();return[c>=k,d>=p]},updatePos:function(e){var h=f.outerWidth(),g=f.outerHeight();if(!e&&a.fixed)if(a.position.constructor==Array)j=parseInt(a.position[0]),
e=parseInt(a.position[1]);else if(1===jQuery(a.position).attr("nodeType"))e=jQuery(a.position).offset(),j=e.left,e=e.top;else{var e=b.offset(),j=b.outerWidth(),k=b.outerHeight();switch(a.position){case "top":var j=e.left-h/2+j/2,e=e.top-g;break;case "bottom":j=e.left-h/2+j/2;e=e.top+k;break;case "left":j=e.left-h;e=e.top-g/2+k/2;break;case "right":j=e.left+j;e=e.top-g/2+k/2;break;default:case "default":j=j/2+e.left+20,e=e.top}}else j=e.pageX,e=e.pageY;"object"!=typeof a.position?(j+=a.offset[0],e+=
a.offset[1],a.boundryCheck&&(k=d.boundryCheck(j,e),k[0]&&(j=j-h/2-2*a.offset[0]),k[1]&&(e=e-g/2-2*a.offset[1]))):("string"==typeof a.position[0]&&(j=String(j)),"string"==typeof a.position[1]&&(e=String(e)));d.setPos(j,e);return d}})}jQuery.fn.simpletip=function(c){var a=jQuery(this).eq("number"==typeof c?c:0).data("simpletip");if(a)return a;var d={content:"A simple tooltip",persistent:!1,focus:!1,hidden:!0,position:"default",offset:[0,0],boundryCheck:!0,fixed:!0,showEffect:"fade",showTime:150,showCustom:null,
hideEffect:"fade",hideTime:150,hideCustom:null,baseClass:"tooltip",activeClass:"active",fixedClass:"fixed",persistentClass:"persistent",focusClass:"focus",onBeforeShow:function(){},onShow:function(){},onBeforeHide:function(){},onHide:function(){},beforeContentLoad:function(){},onContentLoad:function(){}};jQuery.extend(d,c);this.each(function(){var a=new b(jQuery(this),d);jQuery(this).data("simpletip",a)});return this}})();
(function(b){b.fn.orbit=function(c){c=b.extend({animation:"horizontal-push",animationSpeed:600,timer:!0,advanceSpeed:4E3,pauseOnHover:!1,startClockOnMouseOut:!1,startClockOnMouseOutAfter:1E3,directionalNav:!0,captions:!0,captionAnimation:"fade",captionAnimationSpeed:600,bullets:!1,bulletThumbs:!1,bulletThumbLocation:"",afterSlideChange:function(){}},c);return this.each(function(){function a(){if(!c.timer||"false"==c.timer)return!1;y.is(":hidden")?z=setInterval(function(){h("next")},c.advanceSpeed):
(x=!0,w.removeClass("active"),z=setInterval(function(){var a="rotate("+u+"deg)";u+=2;m.css({"-webkit-transform":a,"-moz-transform":a,"-o-transform":a});180<u&&(m.addClass("move"),v.addClass("move"));360<u&&(m.removeClass("move"),v.removeClass("move"),u=0,h("next"))},c.advanceSpeed/180))}function d(){if(!c.timer||"false"==c.timer)return!1;x=!1;clearInterval(z);w.addClass("active")}function f(){if(!c.captions||"false"==c.captions)return!1;var a=n.eq(g).data("caption");(_captionHTML=b(a).html())?(s.attr("id",
a).html(_captionHTML),"none"==c.captionAnimation&&s.show(),"fade"==c.captionAnimation&&s.fadeIn(c.captionAnimationSpeed),"slideOpen"==c.captionAnimation&&s.slideDown(c.captionAnimationSpeed)):("none"==c.captionAnimation&&s.hide(),"fade"==c.captionAnimation&&s.fadeOut(c.captionAnimationSpeed),"slideOpen"==c.captionAnimation&&s.slideUp(c.captionAnimationSpeed))}function e(){if(c.bullets)C.children("li").removeClass("active").eq(g).addClass("active");else return!1}function h(a){function b(){n.eq(d).css({"z-index":1});
l=!1;c.afterSlideChange.call(this)}var d=g,h=a;if(d==h||"1"==n.length)return!1;l||(l=!0,"next"==a?(g++,g==j&&(g=0)):"prev"==a?(g--,0>g&&(g=j-1)):(g=a,d<g?h="next":d>g&&(h="prev")),e(),n.eq(d).css({"z-index":2}),"fade"==c.animation&&n.eq(g).css({opacity:0,"z-index":3}).animate({opacity:1},c.animationSpeed,b),"horizontal-slide"==c.animation&&("next"==h&&n.eq(g).css({left:k,"z-index":3}).animate({left:0},c.animationSpeed,b),"prev"==h&&n.eq(g).css({left:-k,"z-index":3}).animate({left:0},c.animationSpeed,
b)),"vertical-slide"==c.animation&&("prev"==h&&n.eq(g).css({top:p,"z-index":3}).animate({top:0},c.animationSpeed,b),"next"==h&&n.eq(g).css({top:-p,"z-index":3}).animate({top:0},c.animationSpeed,b)),"horizontal-push"==c.animation&&("next"==h&&(n.eq(g).css({left:k,"z-index":3}).animate({left:0},c.animationSpeed,b),n.eq(d).animate({left:-k},c.animationSpeed)),"prev"==h&&(n.eq(g).css({left:-k,"z-index":3}).animate({left:0},c.animationSpeed,b),n.eq(d).animate({left:k},c.animationSpeed))),f())}var g=0,
j=0,k,p,l,r=b(this).addClass("orbit"),q=r.wrap('<div class="orbit-wrapper" />').parent();r.add(k).width("1px").height("1px");var n=r.children("img, a, div");n.each(function(){var a=b(this),c=a.width(),a=a.height();c>r.width()&&(r.add(q).width(c),k=r.width());a>r.height()&&(r.add(q).height(a),p=r.height());j++});1==n.length&&(c.directionalNav=!1,c.timer=!1,c.bullets=!1);n.eq(g).css({"z-index":3}).fadeIn(function(){n.css({display:"block"})});if(c.timer){q.append('<div class="timer"><span class="mask"><span class="rotator"></span></span><span class="pause"></span></div>');
var y=q.children("div.timer"),x;if(0!=y.length){var m=b("div.timer span.rotator"),v=b("div.timer span.mask"),w=b("div.timer span.pause"),u=0,z;a();y.click(function(){x?d():a()});if(c.startClockOnMouseOut){var B;q.mouseleave(function(){B=setTimeout(function(){x||a()},c.startClockOnMouseOutAfter)});q.mouseenter(function(){clearTimeout(B)})}}}c.pauseOnHover&&q.mouseenter(function(){d()});if(c.captions){q.append('<div class="orbit-caption"></div>');var s=q.children(".orbit-caption");f()}if(c.directionalNav){if("false"==
c.directionalNav)return!1;q.append('<div class="slider-nav"><span class="right">Right</span><span class="left">Left</span></div>');var t=q.children("div.slider-nav").children("span.left"),A=q.children("div.slider-nav").children("span.right");t.click(function(){d();h("prev")});A.click(function(){d();h("next")})}if(c.bullets){q.append('<ul class="orbit-bullets"></ul>');var C=q.children("ul.orbit-bullets");for(i=0;i<j;i++){t=b("<li>"+(i+1)+"</li>");if(c.bulletThumbs&&(A=n.eq(i).data("thumb")))t=b('<li class="has-thumb">'+
i+"</li>"),t.css({background:"url("+c.bulletThumbLocation+A+") no-repeat"});q.children("ul.orbit-bullets").append(t);t.data("index",i);t.click(function(){d();h(b(this).data("index"))})}e()}})}})(jQuery);


"use strict";jQuery.base64=(function($){var _PADCHAR="=",_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_VERSION="1.0";function _getbyte64(s,i){var idx=_ALPHA.indexOf(s.charAt(i));if(idx===-1){throw"Cannot decode base64"}return idx}function _decode(s){var pads=0,i,b10,imax=s.length,x=[];s=String(s);if(imax===0){return s}if(imax%4!==0){throw"Cannot decode base64"}if(s.charAt(imax-1)===_PADCHAR){pads=1;if(s.charAt(imax-2)===_PADCHAR){pads=2}imax-=4}for(i=0;i<imax;i+=4){b10=(_getbyte64(s,i)<<18)|(_getbyte64(s,i+1)<<12)|(_getbyte64(s,i+2)<<6)|_getbyte64(s,i+3);x.push(String.fromCharCode(b10>>16,(b10>>8)&255,b10&255))}switch(pads){case 1:b10=(_getbyte64(s,i)<<18)|(_getbyte64(s,i+1)<<12)|(_getbyte64(s,i+2)<<6);x.push(String.fromCharCode(b10>>16,(b10>>8)&255));break;case 2:b10=(_getbyte64(s,i)<<18)|(_getbyte64(s,i+1)<<12);x.push(String.fromCharCode(b10>>16));break}return x.join("")}function _getbyte(s,i){var x=s.charCodeAt(i);if(x>255){throw"INVALID_CHARACTER_ERR: DOM Exception 5"}return x}function _encode(s){if(arguments.length!==1){throw"SyntaxError: exactly one argument required"}s=String(s);var i,b10,x=[],imax=s.length-s.length%3;if(s.length===0){return s}for(i=0;i<imax;i+=3){b10=(_getbyte(s,i)<<16)|(_getbyte(s,i+1)<<8)|_getbyte(s,i+2);x.push(_ALPHA.charAt(b10>>18));x.push(_ALPHA.charAt((b10>>12)&63));x.push(_ALPHA.charAt((b10>>6)&63));x.push(_ALPHA.charAt(b10&63))}switch(s.length-imax){case 1:b10=_getbyte(s,i)<<16;x.push(_ALPHA.charAt(b10>>18)+_ALPHA.charAt((b10>>12)&63)+_PADCHAR+_PADCHAR);break;case 2:b10=(_getbyte(s,i)<<16)|(_getbyte(s,i+1)<<8);x.push(_ALPHA.charAt(b10>>18)+_ALPHA.charAt((b10>>12)&63)+_ALPHA.charAt((b10>>6)&63)+_PADCHAR);break}return x.join("")}return{decode:_decode,encode:_encode,VERSION:_VERSION}}(jQuery));

var host = 'http://' + window.location.host + '/',
	path_to_img = 'adminka.anons.dp.ua',
	img_attr = '?w=300&h=430&tc',
	dialog, calendar, social_nets, user, lang = 'ru', login_dialog;

if (typeof use_filtering == undefined) {
	var use_filtering = false;
}

var toAnonsDate = function (date) {
	var arr = date.split(" "), date = arr[0].split('-'), time = arr[1].substr(0, 5);
	date = date[2] + " " + i18n.month.ru[parseInt(date[1])] + " " + date[0];
	return "<p>" + date + "</p><p><span class='time'>" + time + "</span></p>";
}

var i18n = {
	user_not_found: {
		ru: "Только для <a href='http://anons_dp_ua/users/'>авторизированных</a> пользователей"
	},
	event_not_found: {
		ru: "Извините, но что-то пошло не так!"
	},
	month: {
		ru: ['января', 'февраля', 'марта', 'апреля', 'майя', 'июня', 
		'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря']
	},
	add_event_dialog: {
		ru: 'Событие добавлено на модерацию'
	},
	add_event_dialog_without_moderation: {
		ru: 'Событие опубликовано'
	}
}

var Pagination = function (use_filtering) {
	this.Box = $('.wrapp');
	this.FilterBox = $('.filtering_box', this.Box);
	this.Button = $('.letters .hse');
	this.Filters = $('#tabs li', this.Box);
	this.Items = $('.place_line', this.Box);
	this.Pages = 1;
	this.ItemPerPage = items_per_page;
	this.PageNumber = $('#pag_number');
	this.useAjax = (typeof use_ajax === 'undefined' ? false : true);
	this.use_filtering = use_filtering || false;
	this.CACHE = {};

	this.hash = window.location.hash;	
	
	this.init = function () {
		this.initControls();
		this.Pages = Math.ceil(this.Items.size() / this.ItemPerPage);
		if (this.hash) {
			this.Button.removeClass('activ');
			var tmp = this.hash.replace('#', '').split('&')
				,	page = 0
				, self = this;
			this.build(false);
			if (tmp[0].length == 1) {
				$('.letters li[class*=l-' + tmp[0] + ']').click();
			} else if(tmp[0].length == 3) {
				page = parseFloat(tmp[0].replace('P-', '')) - 1;
				setTimeout(function(){ self.drawPages(page); $('.post_load').lazyload()}, 250);
			}

			if (typeof(tmp[1]) != 'undefined' && tmp[1]) {
				page = parseFloat(tmp[1].replace('P-', '')) - 1;
				setTimeout(function(){ self.drawPages(page); $('.post_load').lazyload()}, 250);
			}
		} else {
			this.build(false);
		}

		if (this.use_filtering === true) this.setCache();
	}
	
	this.initControls = function () {
		var self = this;
		
		this.Button.click(function () {
			var letter = $(this).text()
				,	hash = window.location.hash.replace('#', '').split('&');
			self.Button.removeClass('activ');
			$(this).addClass('activ');
			window.location.hash = (hash.length == 2 ? $(this).text() + '&' + hash[1] : $(this).text() );
			self.build(letter);
      $('.post_load').lazyload();
		});
		
		this.Filters.click(function() {
			var el = $(this), type = el.attr('data-type');
			self.Filters.removeClass('activ');
			el.addClass('activ');
			self.filter(type);	
		});

		$('#pag_number span').live('click', function () {
			var hash = window.location.hash;
			hash = ( hash == '' ? '#P-' + $(this).index() : ( hash.split('&').length == 2 ? hash.split('&')[0] + '&P-0' : hash + '&P-0' ) );
			hash =  hash.replace(/((P-)(.*))/, "\$2" + parseFloat($(this).index() + 1));
			window.location.hash = hash;
			self.drawPages($(this).index());
		});
	}
	
	this.setCache = function () {
		var items_date = [], items_letter = {}, items_category = {};

		$.each(this.Items, function (i, item){
			var let = $(item).attr('data-letter').toString(),
				cat = $(item).attr('data-category').toString();

			if (typeof items_letter[let] == 'undefined') {
				items_letter[let] = [];
			}

			if (typeof items_category[cat] == 'undefined') {
				items_category[cat] = [];				
			}

			items_date[i] = $(item).parent()[0];

			items_letter[let].push($(item).parent());
			
			items_category[cat].push($(item).parent());
		});

		this.CACHE['date'] = items_date.sort(function(a, b){
			return parseInt($(a).attr('data-date')) - parseInt($(b).attr('data-date'))
		});

		this.CACHE['letter_desc'] = this.sorted(items_letter);
		this.CACHE['letter_asc'] = this.sorted(items_letter, true);
		this.CACHE['category'] = this.sorted(items_category);		
	}

	this.sorted = function (obj, reverse) {
		var keys = [], k, i, m, len, arr = [];
		reverse = reverse || (reverse = false)

		for (var k in obj) {
		    if (obj.hasOwnProperty(k)) {
		        keys.push(k);
		    }
		}

		keys.sort();

		if (reverse) {
			keys.reverse();	
		}
		len = keys.length;

		for (i = 0; i < len; i++) {
		    k = keys[i];
		    for (m = 0; m < obj[k].length; m++) {
		    	arr.push(obj[k][m][0]);
		    }
		}
		return arr;
	}

	this.filter = function (type) {
		this.FilterBox.html(this.CACHE[type]);
		this.Items.removeClass('time_filter');
		this.build(false);
		this.rankingClasses();
		time_slider.init();
    $('.post_load').lazyload();
	}

	this.rankingClasses = function () {
		this.Items.removeClass('asm');
		//$("div[class*=page-]:nth-child(even)").addClass("asm");
	}

	this.build = function (letter) {
		if (letter == 'ВСЕ') {
			this.Pages = Math.ceil(this.Items.size() / this.ItemPerPage);
			this.Letter = false;
			this.build(false);
		} else {
			this.Items.hide();
			var showed = (letter === false ? this.Items.not('.time_filter') : $('[data-letter=' + letter + ']'));
			this.Pages = Math.ceil(showed.size() / this.ItemPerPage);
			this.Letter = letter;
			
			for (var i = 0; i < this.Pages; i++) {
				showed.slice((i * this.ItemPerPage), ((i + 1) * this.ItemPerPage)).attr('class', 'page-' + i);
			}
			
			showed.show();
		}
		
		this.drawPages(0);
	}
	
	this.drawPages = function(n) {
		if (this.useAjax) {
			this.ajax(n);	
		};

		this.PageNumber.empty();
		$('[class*=page-]').parent().hide();
		$('[class*=page-]').removeClass('asm');
		$('[class*=page-]').hide();
		
		this.PageNumber.hide();
		
		if (this.Pages > 1) {	
			this.PageNumber.show();
			for (var i = 0, span; i < this.Pages; i++ ) {
				span = $('<span/>')
				span.text((i + 1));
				this.PageNumber.append(span);
			}
			
			$('#pag_number span').removeClass('activ');
			$('#pag_number span').eq(n).addClass('activ');
		} 
		
		var Items = $('.page-' + n).not('.time_filter');
		
		if (this.Letter != false) {
			Items = $('.page-' + n + '[data-letter=' + this.Letter + ']');
		}
				
		Items.show();
		Items.parent().show();
		Items.parent().each(function (i) {
			var parent = $(this);
			if (i%2) {
				parent.removeClass('asm');
			} else {
				parent.addClass('asm');
			}
		});
	};

	this.ajax = function(page) {
		return;
		var self = this, page = page || 1;
		$.ajax({
				url: host + 'events/getAll',
				data: {page: page},
				type: "POST",
				success: function (data) {
					self.CACHE[page] = data;
				}
		})
	};
	
	this.init();
}




Date.prototype.toNormalDate = function () {
	var m = Number(this.getMonth()) + 1;
	var date = ((String(this.getDate()).length == 1) ? "0" + this.getDate() : this.getDate()) + '.' + ((String(m).length == 1) ? "0" + m : m) + '.' + this.getFullYear()
	return date;	
}

Date.prototype.toEventDate = function () {
	var m = Number(this.getMonth()) + 1;
	var date = this.getFullYear() + '-' + ((String(m).length == 1) ? "0" + m : m) + '-' + ((String(this.getDate()).length == 1) ? "0" + this.getDate() : this.getDate());
	return date;	
}

var MyCalendar = function () {
	this.Grid  = $('#grid');
	this.Title = $('.title_month');
	this.Success = false;
	this.DatesHasEvents = [];
	this.date = new Date();
	this.href = "events/day/";
	
	this.months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 
	               'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];
	
	this.months_d = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 
	               'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];
	
	this.init = function () {
		this.today = new Date(this.date.getFullYear(), this.date.getMonth(), this.date.getDate()).toEventDate();
		this.maxDay = new Date(this.date.getFullYear(), this.date.getMonth(), (Number(this.date.getDate()) + 90));
		this.getEvents();
		this.fillTitle();
		this.fillGrid();
		this.initControls();
	}
	
	this.fillTitle = function () {
		var m = this.date.getMonth();
		this.Title.text(this.months[m] + ' ' + this.date.getFullYear())
	}
	
	this.fillGrid = function () {
		var date     = this.date,
			year     = date.getFullYear(), 					  
			month    = date.getMonth(), 					  
			first    = new Date(year, month, 1).getDay(),     	
			last     = new Date(year, month + 1, 0).getDate(),
			prev     = new Date(year, month, 0).getDate(),    
			i, Week, Day, data, title, m = month;
		
		this.Grid.html('');
	
		for (i = 1; i < 43; i += 1) {
			if ((i - 1) % 7 == 0) {
				Week = $("<tr/>");
				this.Grid.append(Week);
			}

			if (i < first) {
				date = new Date(year, month - 1, prev - first + i + 1);
				m = ((month - 1) < 0 ? 0 : (month - 1));
			} else if (i > last + first - 1) {
				m = ((month + 1) < 12 ? (month + 1) : 0);
				date = new Date(year, month, i - first + 1);
			} else if (first == 0) {
				date = new Date(year, month - 1, last - 6 + i);
				m = ((month - 1) < 0 ? 0 : (month - 1));
				if (i == 6) {
					first = 7;
				}
			} else {
				m = month;
				date = new Date(year, month, i - first + 1);
			}
			
			Day = $("<td date='" + date.toNormalDate() + "'>" + date.getDate() + "</td>");

			if (date.getMonth() > month || date.getMonth() < month) {
				Day.empty();
			} else if (date.toEventDate() == this.today) {
				if (this.DatesHasEvents.indexOf(date.toEventDate()) != -1) {
					Day.html("<span class='current'><a title='События " + date.getDate() + ' ' + this.months_d[date.getMonth()] + "' href='" + host + this.href + date.toEventDate() + "'>" + date.getDate() + "</a></span>");
					Day.addClass('hasEvents');					
				} else {
					Day.html("<span class='current'>" + date.getDate() + "</span>");
				}
			} else if (date.toEventDate() < this.today) {
				Day.addClass('disable');
			} else if (this.DatesHasEvents.indexOf(date.toEventDate()) != -1) {
				Day.html("<a title='События " + date.getDate() + ' ' + this.months_d[date.getMonth()] + "' href='" + host + this.href + date.toEventDate() + "'>" + date.getDate() + "</a>");
				Day.addClass('hasEvents');
			}
			
			Week.append(Day);
		}
	}
	
	this.initControls = function () {
		var self = this;
		$('.arrow.next').click(function (e) {
			e.preventDefault();
			e.stopPropagation();
			self.date = new Date(self.date.getFullYear(), self.date.getMonth() + 1, 1);
			self.fillGrid();
			self.fillTitle();
		});
		
		$('.arrow.prev').click(function (e) {
			e.preventDefault();
			e.stopPropagation();
			self.date = new Date(self.date.getFullYear(), self.date.getMonth() - 1, 1);
			self.fillGrid();
			self.fillTitle();
		});
	}	
	
	this.getEvents = function () {
		var self = this;
		
		$.ajax({
			url: host + 'events/getEvents',
			dataType: "txt",
			type: "POST",
			async: false,
			data: {
				from: self.date.toNormalDate(),
				to: self.maxDay.toNormalDate()
			},
			beforeSend: function () {
				if (self.Success === true) {
					return;
				} else {
					self.Success = true;
				}
			},
			success: function (resp) {
				self.DatesHasEvents = resp;
				if($('#panel').length){
					$('#panel').show();
					$('#calendar').animate({right: '-305px'}, 500);
				}
			}
		})
	}
	
	this.init()
}

var SocialNets = function () {
	this.domain=location.href+'/';
	this.domain=this.domain.substr(this.domain.indexOf('://')+3);
	this.domain=this.domain.substr(0,this.domain.indexOf('/'));
	this.location=false;
	this.url=function(system) {
	var title=encodeURIComponent($('title').text().replace('|', '★'));
	var description=encodeURIComponent($('meta[name=description]').attr('content'));
	var url=encodeURIComponent(location.href);
	var image=encodeURIComponent($('meta[name=image]').attr('content'));
	var date = encodeURIComponent($('meta[name=date]').attr('content'));
	if (date != 'undefined') {
		title = title + " ★ " + date;	
	}
		switch (system) {
			case 1: return 'http://vkontakte.ru/share.php?url='+url+'&title='+title+'&description='+description+'&image='+image;
			case 2: return 'http://www.facebook.com/sharer.php?u='+url+'&t='+title;
			case 3: return 'http://twitter.com/share?text='+title+'&url='+url;
			case 4: return 'http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl='+url;
			//case 5: return 'http://connect.mail.ru/share?share_url='+url;
			case 6: return 'http://www.livejournal.com/update.bml?event='+url+'&subject='+title;
			//case 7: return 'http://memori.ru/link/?sm=1&u_data[url]='+url+'&u_data[name]='+title;
			//case 8: return 'http://bobrdobr.ru/addext.html?url='+url+'&title='+title;
			case 9: return 'http://www.google.com/bookmarks/mark?op=add&bkmk='+url+'&title='+title;
			case 10: return 'http://zakladki.yandex.ru/userarea/links/addfromfav.asp?bAddLink_x=1&lurl='+url+'&lname='+title;
			//case 11: return 'http://surfingbird.ru/share?url='+url;
			//case 12: return 'http://text20.ru/add/?title=' + title + '&source='+url+'&text='+title;
		}
	}
	this.redirect = function() {
		if (this.location) location.href=this.location;
		this.location=false;
	}
	
	this.go = function(i) {
		this.location=this.url(i);
	}
	
	this.init = function() {
		var titles=new Array('ВКонтакте','Facebook','Twitter','Одноклассники','','LiveJournal','Memori','','Google','.','Surfingbird',' 2.0');;
		var html='';
		for (i=0;i<12;i++) {
			if (i == 11 || i == 10 || i == 7 || i == 6 || i == 4 || i == 9) continue;
			html+='<a href="'+this.url(i+1)+'"><img src="'+host+'images/blank.gif" width="16" height="16" alt=" #" title="'+titles[i]+'" style="border:0;padding:0;margin:0 4px 0 0;background-position: 0 -'+(i*16)+'px"/></a>';
		}
		$('#social_nets').append(html);
	}
	
	this.init();
}

var User = function () {
	this.u = {
		is_logged: false,
		is_partner: false,
		name: null,
		id: null
	};
	
	this.init = function () {
		if ($.cookie('anons_dp_ua')) {
			var USER, u = $.cookie('anons_dp_ua');
			u = u.split('~');
			USER = eval(u[1]);
			this.u = {
				is_logged: true,
				is_partner: false,
				name: USER[1],
				id: USER[0]
			};
		}
		
		this.initControls();
	}
	
	this.initControls = function () {
		var self = this;
		if ($('.event_go').length) {
			$('.event_go').click(function() {
				var el = $(this);
				
				if (self.u.is_logged === false) {
					dialog.show(i18n.user_not_found[lang], 'dialog_error');
					return;
				}
				
				var id_event = el.attr('id').replace('event_go_', '');
				var date = el.attr('date');
				
				var action = (el.hasClass('disabled') ? 'remove' : 'add');
				
				if (self.eventToList(id_event, date, action)) {
					var i = Number($('.user_go').text());
					
					if (action == 'add') {
						$('.user_go').text((i+1));
						el.text("Я передумал(а)").addClass('disabled');
					} else {
						$('.user_go').text((i-1));
						el.text("Я пойду").removeClass('disabled');
					}
				};
			});			
		}
		
		if ($('.place_go').length) {
			$('.place_go').click(function() {
				var el = $(this);
				
				if (self.u.is_logged === false) {
					dialog.show(i18n.user_not_found[lang], 'dialog_error');
					return;
				}
				
				var id_place = el.attr('id').replace('place_go_', '');			
				var action = (el.hasClass('disabled') ? 'remove' : 'add');
				
				if (self.placeToList(id_place, action)) {
					var i = Number($('.user_like').text());
					
					if (action == 'add') {
						$('.user_like').text((i+1));
						el.text("Я передумал(а)").addClass('disabled');
					} else {
						$('.user_like').text((i-1));
						el.text("Мне нравится").removeClass('disabled');
					}
				};
			});			
		}		
		
	}
	
	this.eventToList = function (id_event, date, action) {
		var self = this;
		this.valid = true;

		if (this.LOCK === true) return;
		$.ajax({
			url: host + 'users/eventToList',
			data: {id_event: id_event, id_user: this.u.id, date: date, action: action},
			type: 'POST',
			async: false,
			beforeSend: function () {
				self.LOCK = true;
			},
			success: function (msg) {
				self.LOCK = false;
			},				
			error: function () {
				dialog.show(i18n.event_not_found[lang], 'dialog_error', function() {self.LOCK = false});
				self.valid = false;
				self.LOCK = false;
			}
		})
		return this.valid;
	}
	
	this.placeToList = function (id_place, action) {
		var self = this;
		this.valid = true;

		if (this.LOCK === true) return;
		$.ajax({
			url: host + 'users/placeToList',
			data: {id_place: id_place, id_user: this.u.id, action: action},
			type: 'POST',
			async: false,
			beforeSend: function () {
				self.LOCK = true;
			},
			success: function (msg) {
				self.LOCK = false;
			},				
			error: function () {
				dialog.show(i18n.event_not_found[lang], 'dialog_error', function() {self.LOCK = false});
				self.valid = false;
			}
		})
		return this.valid;
	}	

	this.init();
}

function makeEventsGood(i) {
	var str = i + " событий";
	if (i == 1) {
		str = i + " событие";
		
	} else if (i > 1) {
		if (i < 5) {
			str = i + " события";
		}
	}
	
	return str;
}

function makePlacesGood(i) {
	var str = i + " любимых мест";
	if (i == 1) {
		str = i + " любимое место";
		
	} else if (i > 1) {
		if (i == 2 || i == 3 || i == 4) {
			str = i + " любимых места";
		} else {
			str = i + " любимых мест";
		} 
	}
	
	return str;
}

$.fn.focus_blur = function (text) {
	$(this).focus(function () {
		if(!$(this).val() || $(this).val() == text) {
			$(this).val('');
		}
	}).blur(function () {
		if (!$(this).val()) {
			$(this).val(text);
		}
	});
}

var ScrollerTop = function () {
	this.el = $('#top');
	this.H = $(window).height();
	this.O = 0;
	var self = this;	
	$(window).bind('scroll', function () {
		self.O = Math.ceil(((window.pageYOffset / 1.3) / self.H) * 10000) / 10000;
		if (self.O > 1) self.O = 1;
		self.el.css({
			opacity: self.O
		})
	});
}

$.fn.bind_input = function () {
	$(this).focusin(function () {
		$(this).prev().hide();
	});

	$(this).focusout(function () {
		if (!$(this).val()) {
			$(this).prev().show();
		};
	});
}

$(function () {
	if( $('.free_price_title').length ) { $('.free_price_title').show(); }
	if ($('#google_maps').length && !$('#google_maps').hasClass('hide')) { createMap() }
	
	$('#show_google_maps').click(function () {
		var el = $('#google_maps');
		if (el.hasClass('hide')) {
			el.removeClass('hide');
			createMap();			
		}
		$.scrollTo('#google_maps', 250);
	});

	if($('#partners_list').length){
		var partner_box = $('#partners_list')
			,	elms = partner_box.find('.partner');

		elms.click(function(){
			var el = $(this)
				, id = parseInt(el.data('rel'));

			arrInfoWindows[id].open(map, arrMarkers[id]);
			$.scrollTo('#google_maps_partner', 250);
		})
	}

	$('.price_changer').click(function(){
		var spans = $('.price_changer')
			,	input = $('#price')
			,	el = $(this)
			,	val = el.data('val');

		spans.removeClass('active');
		el.addClass('active');
		input.val(val);
		if(parseInt(val) == 0) {
			input.removeAttr('disabled');
		} else {
			input.attr('disabled', 'disabled');
		}
	});

	$('.show_cat_group').click(function(){
		$('#cat_group').toggle();
	});

	$('#share').popupWindow({
	    width:550,
	    height:400,
	    centerBrowser:1
	});

	$('#calendar.calendar_second_page').hover(
		function(){
			$('#panel').hide();
			$(this).removeClass('FFFFAB').addClass('FFFFE5');
			$(this).stop().animate({right: 0}, 500)
		},
		function(){
			$(this).stop().animate({right: '-335px'}, 500, function(){
				$('#panel').show();
				$(this).removeClass('FFFFE5').addClass('FFFFAB');
				$('#calendar.calendar_second_page').animate({right: '-305px'}, 500);
			})
		}
	)

	$('body').css('cursor', 'default');
	// if ($.browser.msie && parseInt($.browser.version) != 9) {
	// 	var ie = $('#ie'), wrapp = $('#wrapper');
	// 	$('#top').hide();
	// 	wrapp.empty();
	// 	wrapp.html('');
	// 	wrapp.append(ie);
	// 	ie.addClass('incvisition').show();
	// 	return;
	// }

	if($('a.has_tooltip').length > 0){
		$.each($('a.has_tooltip'), function(){
			var el = $(this)
				, tooltip = el.data('tooltip');

			el.simpletip({ content: tooltip, fixed: false });
		})
	}

	$('.post_load').lazyload();

	var scroller = new ScrollerTop();
	dialog = new Dialog({type: 'opacity'});

	if (typeof(fix_scroll) != 'undefined') {
		$('body').addClass('fix_scroll');
	}

  if (typeof(use_slider) != 'undefined' && use_slider == true) {
      setTimeout(function(){
      	$('#featured').orbit();
      	$('.slider_fixed_margin').animate({opacity: 1}, 500); 
      }, 1500);
  }

	$('.bind_input').bind_input();

	if(typeof(show_add_event_dialog) != 'undefined' && show_add_event_dialog === true) {
		dialog.show( (show_add_event_dialog_without_moderation ? i18n.add_event_dialog_without_moderation[lang] : i18n.add_event_dialog[lang] ), 'dialog_info');
	}

	if ($("#tabs").length) {
		$('#tabs li').click(function () {
			var el = $(this)
			  , rel = el.attr('rel')
			  , func = el.data('func')
			  , href = el.data('href');

			$('#tabs li').removeClass('active');
			el.addClass('active');
			$('.tab').addClass('hidden');
			if (func) {
				window[func]();
			} else if(href) {
				window.location.href = href;
			}
		});
	}

	if (typeof use_calendar != 'undefined') {
		calendar = new MyCalendar();	
	}
	
	if (typeof use_redactor != 'undefined') {
		$('body').append('<script type="text/javascript" src="'+host+'js/redactor/redactor.js"></script>');
		$('#redactor_content').redactor({ toolbar: 'mini', path: '/js/redactor/' });
		$('input[type=radio]').change(function () {
			var id = $(this).attr('id').replace('type-', '');
			$('[id*=tabss-]').hide();
			$('#tabss-' + id).show();
		});
	}

	social_nets = new SocialNets();	
	user = new User();
	
	if ($('.datepicker').length) {
		$('.datepicker').dynDateTime({
			button: ".next()",
			ifFormat: "%Y-%m-%d"
		});
	}

	$('.pointer a, .p_href a').click(function(event){
    event.preventDefault();
    event.stopPropagation();
    event.cancelBubble = true;
	});

	$('.pointer').live('mousedown',function (event) {
    event.preventDefault();
    event.stopPropagation();
    event.cancelBubble = true;
		( ( (event.keyCode == 0 || event.keyCode == undefined) && event.button == 1 ) || ( event.ctrlKey ) 
			? window.open($(this).attr('href'), "_blank") 
			: window.location.href = $(this).attr('href'));
	});
	
	$('#search #text').bind('keyup', function (e) {
		e.preventDefault();
		if(e.keyCode == 13) {
			var form = $(this).parent();
			form.attr('action', actions[$('.radio_type:checked').val()]);
			form.submit();
		}
	})
	
	$('#top').click(function () {
		$.scrollTo('#anonsdpua', 200);
	});
	

  $('#videos_show').click(function () {
      var el = $('#videos');
      if (el.hasClass('hide')) {
          el.removeClass('hide');

      }
      $.scrollTo('#videos', 250);
  });
	
	$('#get_all_recomended').click(function () {
		var el = $(this), ids = el.attr('ids');
		el.parent().parent().hide();
		
		$.ajax({
			url: host + 'events/getAll',
			data: {ids: ids},
			type: "POST",
			success: function (data) {
				if (data) {
					var box = $('#other_recomended');
					box.html(data);
				}
			}
		})
	});
	
	if (typeof(MAKE_HIGHLIGHT) != 'undefined') { $('.p_info h2').highlight(HIGHLIGHT_TEXT) }
	
	$('.radio_type').bind('click', function () {
		if ($(this).val() == 1) {
			$('#date').hide().prev('label').hide();
			$('#set_dates').hide();
			$('#time_date_slider_wrapper').hide();
		} else {
			$('#date').show().prev('label').show();
			$('#time_date_slider_wrapper').show();
			if ($('#date').val() == 5) {
				$('#set_dates').show();
			}
		}
	});
	
	$('#date').bind('change', function () {
		if ($(this).val() == 5) {
			$('#set_dates').show();
		} else {
			$('#set_dates').hide();
		}
	});
	
	if (typeof(use_pagination) != 'undefined' && use_pagination === true) {
		var placesPagination = new Pagination(use_filtering);
	}
	
	$('#search .button').click(function () { 
		var action = actions[$('input[type=radio]:checked').val()];
		$('#search form').attr('action', action[0]).submit();
	});

	$('.quick_search span').click(function(){
		var el = $(this)
			,	what_search = el.data('search')
			,	box = $('#quick_search_box')
			,	title = box.prev();

			$('.quick_search span').removeClass('active');
			el.addClass('active');

		$.ajax({
				url: host + 'events/getQuick',
				data: {what_search: what_search},
				type: "POST",
				success: function (data) {
					box.html(data);
					title.removeClass('hidden_hard');
					$.scrollTo('#actual', 500);
				}
		})
	})

	//$('#text').focus_blur('Что ищем?');
	$('#log').focus_blur('Логин');
	$('#pass').focus_blur('Пароль');
	
	$('.p_href').live('mousedown', function (event) {
		event.preventDefault();
		event.stopPropagation();
		var href = $(this).attr('href');
		(((event.keyCode == 0 || event.keyCode == undefined) && event.button == 1) || (event.ctrlKey) ? window.open(href, '_blank') : window.location.href = href);
		$('body').css('cursor', 'default');
	});
	
	$('.bind_input').prev().click(function () {
		$(this).next().focusin().focus();
	});

	$('#login .button').click(function () {
		var form = $(this).parent(), valid = true;
		$.each(form.find('.bind_input'), function () {
			var input = $(this);
			if (!input.val()) {
				input.focusin().focus();
				valid = false;
				return false;
			}
		});

		if (valid) {
			form.submit();
		}
	});

	$('.line_box').click(function (e) {
		if (!$(e.target).hasClass('line_box')) return;
		
		var el = $(this), type = (el.attr('data-href') ? 'events' : 'places'),
		data = el.attr('data-href') || el.attr('data-id');
		observer[type](data, el);
	});


	if (typeof use_ajax_load != 'undefined') {
		var button = $('#uploadButton');

      	$.ajax_upload(button, {
            action : '/users/upload',
            name: 'myfile',
            onSubmit : function(file, ext) {
              $(".row3 .loader").css({display: 'inline-block'});
              this.disable();
            },
            onComplete : function(file, response) {
              $(".row3 .loader").hide();

              $('#image_hidden').val(file);
              var base64str = $.base64.encode("events/events/"+file+img_attr);
              $('#block_for_image')
              	.removeClass('event_img')
              	.html('<img class="event_img" src="http://'+path_to_img+'/img.php?p='+base64str+'">');
              
              this.enable();
            }
        });		
	}


	var observer = {
		CACHE: {},
		getEvents: function(id) {
			var self = this;
			if (typeof this.CACHE[id] != 'undefined') return this.CACHE[id];

			$.ajax({
				url: host + 'users/getEventsForPlace',
				data: {id: id},
				type: "POST",
				dataType: "json",
				async: false,
				success: function (data) {
					if (data) {
						self.CACHE[id] = data;
					} else {
						return false;
					}
				}				
			});
			return this.CACHE[id];
		},

		events: function (href) {
			window.location.href = href;
		},

		places: function (id, block) {
			var el = block.next().find('.my_place_events'), parent = el.parent(), 
				html = [], my_events = this.getEvents(id);

			if (my_events.length) {
				for(var i = 0; i < my_events.length; i++) {
					var item = my_events[i];
					html.push('<div class="my_place_event left">');
						html.push('<a href="' + host + 'events/show/' + item.catAlias + '/' + item.alias + '"><img class="img_small" src="http://' + path_to_img + '/images/sunny/events/events/' + item.image + img_attr + '" title="' + item.title + '"></a>');
						html.push(toAnonsDate(item.date));
					html.push('</div>');
				}	
			} else {
				html.push('<div class="empty_events">Нет актуальных событий.</div>');
			}

			html.push('<div class="clearer"></div>');

			html = html.join("");

			if (parent.hasClass('hidden')) {
				el.html(html);
				parent.toggleClass('hidden');
			} else {
				parent.toggleClass('hidden');
			}
		}
	}

	var RangeSlider = function (time_from_to) {
		var hours = [
			'00', '01', '02', '03', '04', '05', '06', '07', '08',
			'09', '10', '11', '12', '13', '14', '15', '16', '17',
			'18', '19', '20', '21', '22', '23', '24'
		]

		this.time_from_to = time_from_to || ["00", "24"];
		this.has_items    = ( placesPagination ? true : false );
		this.el           = $("#slider-range");
		this.timeFrom     = $('#time_from');
		this.timeTo 			= $('#time_to');
		this.timeFromText = $('#time_from_text');
		this.timeToText   = $('#time_to_text');
		this.ItemsEvents  = ( this.has_items ? placesPagination.Items : [] );

		this.build = function (from, to) {
			var time ,el;
			this.ItemsEvents.show();
			this.ItemsEvents.parent().show();
			$.each(this.ItemsEvents, function (i, item) {
				el = $(item);
				el.removeClass('time_filter');
				time = parseInt(el.data('time'));
				if (time < from || time > to) {
					el.hide();
					el.addClass('time_filter');
					el.parent().hide();
				}
			})
		}

		this.init = function() {
			var self = this;
			this.el.slider({
				range: true,
				min: 0,
				max: 24,
				values: [self.time_from_to[0], self.time_from_to[1]],
				slide: function( event, ui ) {
					var from = hours[ui.values[0]];
					var to = hours[ui.values[1]];
					self.showValues(from, to);

					if (self.has_items){
						self.build(hours[ui.values[0]], hours[ui.values[1]]);					
						placesPagination.build(false);
						placesPagination.rankingClasses();						
					}
				}
			});
			
			this.showValues(self.time_from_to[0], self.time_from_to[1]);		
		}

		this.showValues = function (from, to) {
			this.timeFromText.text(from + ":00");
			this.timeToText.text(to + ":00");
			if (to == '24') this.timeToText.text('23:59');
			this.timeFrom.val(from);
			this.timeTo.val(to);
		}
	}

	if (typeof(use_range_slider) != "undefined" && use_range_slider === true) {
		time_slider = new RangeSlider(time_from_to);
		time_slider.init();
	}
})